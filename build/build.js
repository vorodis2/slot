!function(t){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(t,i){!function(t,e){if(!E[t]||!I[t])return;for(var i in I[t]=!1,e)Object.prototype.hasOwnProperty.call(e,i)&&(p[i]=e[i]);0==--m&&0===v&&x()}(t,i),e&&e(t,i)};var i,A=!0,s="0e6fe6fd166e37ef7620",n=1e4,r={},o=[],a=[];function h(t){var e=_[t];if(!e)return R;var A=function(A){return e.hot.active?(_[A]?-1===_[A].parents.indexOf(t)&&_[A].parents.push(t):(o=[t],i=A),-1===e.children.indexOf(A)&&e.children.push(A)):(console.warn("[HMR] unexpected require("+A+") from disposed module "+t),o=[]),R(A)},s=function(t){return{configurable:!0,enumerable:!0,get:function(){return R[t]},set:function(e){R[t]=e}}};for(var n in R)Object.prototype.hasOwnProperty.call(R,n)&&"e"!==n&&"t"!==n&&Object.defineProperty(A,n,s(n));return A.e=function(t){return"ready"===l&&u("prepare"),v++,R.e(t).then(e,function(t){throw e(),t});function e(){v--,"prepare"===l&&(C[t]||y(t),0===v&&0===m&&x())}},A.t=function(t,e){return 1&e&&(t=A(t)),R.t(t,-2&e)},A}function c(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==t,active:!0,accept:function(t,i){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var A=0;A<t.length;A++)e._acceptedDependencies[t[A]]=i||function(){};else e._acceptedDependencies[t]=i||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:b,apply:D,status:function(t){if(!t)return l;d.push(t)},addStatusHandler:function(t){d.push(t)},removeStatusHandler:function(t){var e=d.indexOf(t);e>=0&&d.splice(e,1)},data:r[t]};return i=void 0,e}var d=[],l="idle";function u(t){l=t;for(var e=0;e<d.length;e++)d[e].call(null,t)}var g,p,f,m=0,v=0,C={},I={},E={};function w(t){return+t+""===t?+t:t}function b(t){if("idle"!==l)throw new Error("check() is only allowed in idle status");return A=t,u("check"),(e=n,e=e||1e4,new Promise(function(t,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var A=new XMLHttpRequest,n=R.p+""+s+".hot-update.json";A.open("GET",n,!0),A.timeout=e,A.send(null)}catch(t){return i(t)}A.onreadystatechange=function(){if(4===A.readyState)if(0===A.status)i(new Error("Manifest request to "+n+" timed out."));else if(404===A.status)t();else if(200!==A.status&&304!==A.status)i(new Error("Manifest request to "+n+" failed."));else{try{var e=JSON.parse(A.responseText)}catch(t){return void i(t)}t(e)}}})).then(function(t){if(!t)return u("idle"),null;I={},C={},E=t.c,f=t.h,u("prepare");var e=new Promise(function(t,e){g={resolve:t,reject:e}});p={};return y(0),"prepare"===l&&0===v&&0===m&&x(),e});var e}function y(t){E[t]?(I[t]=!0,m++,function(t){var e=document.createElement("script");e.charset="utf-8",e.src=R.p+""+t+"."+s+".hot-update.js",document.head.appendChild(e)}(t)):C[t]=!0}function x(){u("ready");var t=g;if(g=null,t)if(A)Promise.resolve().then(function(){return D(A)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var i in p)Object.prototype.hasOwnProperty.call(p,i)&&e.push(w(i));t.resolve(e)}}function D(e){if("ready"!==l)throw new Error("apply() is only allowed in ready status");var i,A,n,a,h;function c(t){for(var e=[t],i={},A=e.slice().map(function(t){return{chain:[t],id:t}});A.length>0;){var s=A.pop(),n=s.id,r=s.chain;if((a=_[n])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:r,moduleId:n};if(a.hot._main)return{type:"unaccepted",chain:r,moduleId:n};for(var o=0;o<a.parents.length;o++){var h=a.parents[o],c=_[h];if(c){if(c.hot._declinedDependencies[n])return{type:"declined",chain:r.concat([h]),moduleId:n,parentId:h};-1===e.indexOf(h)&&(c.hot._acceptedDependencies[n]?(i[h]||(i[h]=[]),d(i[h],[n])):(delete i[h],e.push(h),A.push({chain:r.concat([h]),id:h})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:i}}function d(t,e){for(var i=0;i<e.length;i++){var A=e[i];-1===t.indexOf(A)&&t.push(A)}}e=e||{};var g={},m=[],v={},C=function(){console.warn("[HMR] unexpected require("+b.moduleId+") to disposed module")};for(var I in p)if(Object.prototype.hasOwnProperty.call(p,I)){var b;h=w(I);var y=!1,x=!1,D=!1,T="";switch((b=p[I]?c(h):{type:"disposed",moduleId:I}).chain&&(T="\nUpdate propagation: "+b.chain.join(" -> ")),b.type){case"self-declined":e.onDeclined&&e.onDeclined(b),e.ignoreDeclined||(y=new Error("Aborted because of self decline: "+b.moduleId+T));break;case"declined":e.onDeclined&&e.onDeclined(b),e.ignoreDeclined||(y=new Error("Aborted because of declined dependency: "+b.moduleId+" in "+b.parentId+T));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(b),e.ignoreUnaccepted||(y=new Error("Aborted because "+h+" is not accepted"+T));break;case"accepted":e.onAccepted&&e.onAccepted(b),x=!0;break;case"disposed":e.onDisposed&&e.onDisposed(b),D=!0;break;default:throw new Error("Unexception type "+b.type)}if(y)return u("abort"),Promise.reject(y);if(x)for(h in v[h]=p[h],d(m,b.outdatedModules),b.outdatedDependencies)Object.prototype.hasOwnProperty.call(b.outdatedDependencies,h)&&(g[h]||(g[h]=[]),d(g[h],b.outdatedDependencies[h]));D&&(d(m,[b.moduleId]),v[h]=C)}var M,B=[];for(A=0;A<m.length;A++)h=m[A],_[h]&&_[h].hot._selfAccepted&&B.push({module:h,errorHandler:_[h].hot._selfAccepted});u("dispose"),Object.keys(E).forEach(function(t){!1===E[t]&&function(t){delete installedChunks[t]}(t)});for(var S,H,j=m.slice();j.length>0;)if(h=j.pop(),a=_[h]){var Q={},O=a.hot._disposeHandlers;for(n=0;n<O.length;n++)(i=O[n])(Q);for(r[h]=Q,a.hot.active=!1,delete _[h],delete g[h],n=0;n<a.children.length;n++){var P=_[a.children[n]];P&&((M=P.parents.indexOf(h))>=0&&P.parents.splice(M,1))}}for(h in g)if(Object.prototype.hasOwnProperty.call(g,h)&&(a=_[h]))for(H=g[h],n=0;n<H.length;n++)S=H[n],(M=a.children.indexOf(S))>=0&&a.children.splice(M,1);for(h in u("apply"),s=f,v)Object.prototype.hasOwnProperty.call(v,h)&&(t[h]=v[h]);var L=null;for(h in g)if(Object.prototype.hasOwnProperty.call(g,h)&&(a=_[h])){H=g[h];var N=[];for(A=0;A<H.length;A++)if(S=H[A],i=a.hot._acceptedDependencies[S]){if(-1!==N.indexOf(i))continue;N.push(i)}for(A=0;A<N.length;A++){i=N[A];try{i(H)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:h,dependencyId:H[A],error:t}),e.ignoreErrored||L||(L=t)}}}for(A=0;A<B.length;A++){var G=B[A];h=G.module,o=[h];try{R(h)}catch(t){if("function"==typeof G.errorHandler)try{G.errorHandler(t)}catch(i){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:h,error:i,originalError:t}),e.ignoreErrored||L||(L=i),L||(L=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:h,error:t}),e.ignoreErrored||L||(L=t)}}return L?(u("fail"),Promise.reject(L)):(u("idle"),new Promise(function(t){t(m)}))}var _={};function R(e){if(_[e])return _[e].exports;var i=_[e]={i:e,l:!1,exports:{},hot:c(e),parents:(a=o,o=[],a),children:[]};return t[e].call(i.exports,i,i.exports,h(e)),i.l=!0,i.exports}R.m=t,R.c=_,R.d=function(t,e,i){R.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},R.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},R.t=function(t,e){if(1&e&&(t=R(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(R.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var A in t)R.d(i,A,function(e){return t[e]}.bind(null,A));return i},R.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return R.d(e,"a",e),e},R.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},R.p="build/",R.h=function(){return s},h(8)(R.s=8)}([function(t,e,i){"use strict";function A(t){this.parent=t;var e,i=this;this._active=!1,this.RADIUS=1e3,this.POS_X=0,this.POS_Y=0,this.POS_Z=0,this.LINK="null",this.COLOR="0xffffff",this._radius=this.RADIUS,this._link=this.LINK,this._color=this.COLOR,this._shadRotZ=this.parent.ROTATION_Z,this._rotZ=0,this._x=this.POS_X,this._y=this.POS_Y,this._z=this.POS_Z,this.mesh=void 0,this.cont3d=void 0,this.cont3d1=void 0,this.textur=void 0,this.init=function(){null==this.mesh&&(this.geometry=new THREE.SphereGeometry(1,32,32),this.loader=new THREE.TextureLoader,this.loaderHDR=new THREE.RGBELoader,this.material=new THREE.MeshBasicMaterial({side:THREE.BackSide,color:16777215}),this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.scale.set(this._radius,this._radius,this._radius),this.cont3d=new THREE.Object3D,this.cont3d1=new THREE.Object3D,this.cont3d.add(this.cont3d1),this.cont3d1.add(this.mesh),this.cont3d1.rotation.y=this._shadRotZ,this.mesh.rotation.y=this._rotZ,this.cont3d.rotation.x=-Math.PI/2)},this.dergActiv=function(){1==this._active?null==this.cont3d.parent&&this.parent.parent.groupObject.add(this.cont3d):null!=this.cont3d.parent&&this.parent.parent.groupObject.remove(this.cont3d)},this.dergLink=function(){"null"==this._link?null!=this.material.map&&(this.material.map=null,this.material.needsUpdate=!0):(0==(e=this.checkFormat(this._link))&&this.loader.load(this._link,function(t){i.textur=t,i.material.map=t,i.material.needsUpdate=!0,i.parent.parent.intRend=1}),1==e&&this.loaderHDR.load(this._link,function(t){i.textur=t,i.textur.encoding=THREE.RGBEEncoding,i.textur.minFilter=THREE.NearestFilter,i.textur.magFilter=THREE.NearestFilter,i.textur.flipY=!0,i.material.map=t,i.material.needsUpdate=!0,i.parent.parent.intRend=1}))},this.checkFormat=function(t){return-1!==t.indexOf(".png")?0:-1!==t.indexOf(".jpeg")?0:-1!==t.indexOf(".jpg")?0:t.length>150?-1!==t.indexOf("png")?0:-1!==t.indexOf("jpeg")?0:-1!==t.indexOf("jpg")?0:1:1},this.render=function(){}}i.d(e,"a",function(){return A}),A.prototype={set x(t){this._x!==t&&(this._x=t,this.cont3d.position.x=t,this.parent.parent.intRend=1)},get x(){return this._x},set y(t){this._y!==t&&(this._y=t,this.cont3d.position.y=t,this.parent.parent.intRend=1)},get y(){return this._y},set z(t){this._z!==t&&(this._z=t,this.cont3d.position.z=t,this.parent.parent.intRend=1)},get z(){return this._z},set active(t){this._active!==t&&(this._active=t,this.init(),this.dergActiv())},get active(){return this._active},set radius(t){this._radius!==t&&(this._radius=t,null!=this.mesh&&this.mesh.scale.set(this._radius,this._radius,this._radius))},get radius(){return this._radius},set link(t){this._link!==t&&(this._link=t,this.init(),this.dergLink())},get link(){return this._link},set shadRotZ(t){this._shadRotZ!==t&&(this._shadRotZ=t,null!=this.mesh&&(this.cont3d1.rotation.y=this._shadRotZ))},get shadRotZ(){return this._shadRotZ},set rotZ(t){this._rotZ!==t&&(this._rotZ=t,null!=this.mesh&&(this.mesh.rotation.y=this._rotZ))},get rotZ(){return this._rotZ},set color(t){if(this._color!==t){this._color=t,this.init();var e=this._color;if("string"==typeof e&&-1!=e.indexOf("x")){var i=e.split("x");e="#"+i[1]}this.material.color=new THREE.Color(e)}},get color(){return this._color}}},function(t,e,i){"use strict";var A=i(4);function s(){var t,e=this;this.type="CubeMap",this.LINK="null",this.EXPOSURE=-1,this.GAMMA=-1,this._link="nullXZ",this._exposure=this.EXPOSURE,this._gamma=this.GAMMA,this.exposureStart=-1,this.gammaStart=-1,this._activDiz=!1,this._layer=1,this.otherLayer=31,this.renderer=void 0,this.scene=void 0,this.cubeCamera=new THREE.CubeCamera(1,1e4,512),this.geometry=new THREE.SphereBufferGeometry(1500,32,32),this.mesh=new THREE.Mesh(this.geometry),this.loader=new THREE.RGBELoader,this.init=function(t,e){void 0!==t&&void 0!==e&&(this.renderer=t,this.scene=e,this.scene.add(this.cubeCamera),this.scene.add(this.mesh),this.link="null")},this.setLayers=function(t){e.mesh.layers.set(t),e.cubeCamera.layers.set(t),e.cubeCamera.traverse(function(e){e.layers.set(t)})},this.upDate=function(t){this.setLayers(this.otherLayer),this.cubeCamera.update(t||this.renderer,this.scene),this.setLayers(this._layer)},this.material=void 0,this.dragMaterial=function(t){this.material=t,i==t.sahMin&&(this.mesh.material=t,this.upDate())},this.arrMat=[],this.testBD=function(t){for(var e=0;e<this.arrMat.length;e++)if(this.arrMat[e].linkMy==t)return this.arrMat[e];return null};var i=0;this.loadFun=function(){var s=++i,n=this._link+"";if(null!=(t=this.testBD(this._link))&&(t.sahMin=i,this.dragMaterial(t)),"null"!=this._link&&null!=this._link)-1==this._link.indexOf(".png")&&-1==this._link.indexOf(".jpg")&&-1==this._link.indexOf(".jpeg")?this.loader.load(this._link,function(t,i){var r=new THREE.ShaderMaterial({uniforms:{tDiffuse:{type:"t",value:t},exposure:{type:"f",value:i.exposure},gamma:{type:"f",value:i.gamma},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)}},vertexShader:A.vertex,fragmentShader:A.fragment});t.minFilter=THREE.LinearFilter,t.magFilter=THREE.NearestFilter,t.flipY=!0,t.wrapS=t.wrapT=THREE.RepeatWrapping,t.anisotropy=e.renderer.capabilities.getMaxAnisotropy(),r.side=THREE.BackSide,r.linkMy=n,r.sahMin=s,e.arrMat.push(r),e.dragMaterial(r),e.exposureStart=i.exposure,e.gammaStart=i.gamma,1==e._activDiz&&(e._exposure=i.exposure,e._gamma=i.gamma)}):(new THREE.TextureLoader).load(this._link,r);else{(new THREE.TextureLoader).load("data:image/jpeg;base64,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UmdzTWJvb2wAAAAAAENybkNib29sAAAAAABDbnRDYm9vbAAAAAAATGJsc2Jvb2wAAAAAAE5ndHZib29sAAAAAABFbWxEYm9vbAAAAAAASW50cmJvb2wAAAAAAEJja2dPYmpjAAAAAQAAAAAAAFJHQkMAAAADAAAAAFJkICBkb3ViQG/gAAAAAAAAAAAAR3JuIGRvdWJAb+AAAAAAAAAAAABCbCAgZG91YkBv4AAAAAAAAAAAAEJyZFRVbnRGI1JsdAAAAAAAAAAAAAAAAEJsZCBVbnRGI1JsdAAAAAAAAAAAAAAAAFJzbHRVbnRGI1B4bEBSAAAAAAAAAAAACnZlY3RvckRhdGFib29sAQAAAABQZ1BzZW51bQAAAABQZ1BzAAAAAFBnUEMAAAAATGVmdFVudEYjUmx0AAAAAAAAAAAAAAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAAAAAAQY3JvcFdoZW5QcmludGluZ2Jvb2wAAAAADmNyb3BSZWN0Qm90dG9tbG9uZwAAAAAAAAAMY3JvcFJlY3RMZWZ0bG9uZwAAAAAAAAANY3JvcFJlY3RSaWdodGxvbmcAAAAAAAAAC2Nyb3BSZWN0VG9wbG9uZwAAAAAAOEJJTQPtAAAAAAAQAEgAAAABAAIASAAAAAEAAjhCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAeDhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAjhCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIAQzhCSU0EAgAAAAAAiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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Lm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTEwLTA1VDE2OjMzOjQwKzAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTEwLTA1VDE2OjMzOjQwKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0xMC0wNVQxNjozMzo0MCswMzowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNDI1QjQxNkEzQzhFODExODIxNzhEQTQ1NUFCNTJGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBMzI1QjQxNkEzQzhFODExODIxNzhEQTQ1NUFCNTJGMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkEzMjVCNDE2QTNDOEU4MTE4MjE3OERBNDU1QUI1MkYwIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6QTMyNUI0MTZBM0M4RTgxMTgyMTc4REE0NTVBQjUyRjAiIHN0RXZ0OndoZW49IjIwMTgtMTAtMDVUMTY6MzM6NDArMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpBNDI1QjQxNkEzQzhFODExODIxNzhEQTQ1NUFCNTJGMCIgc3RFdnQ6d2hlbj0iMjAxOC0xMC0wNVQxNjozMzo0MCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1p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",r)}function r(t){t.minFilter=THREE.LinearFilter,t.magFilter=THREE.NearestFilter,t.flipY=!0,t.wrapS=t.wrapT=THREE.RepeatWrapping,t.anisotropy=e.renderer.capabilities.getMaxAnisotropy();var i=new THREE.MeshBasicMaterial({map:t,side:THREE.BackSide});i.linkMy=n,i.sahMin=s,e.arrMat.push(i),e.dragMaterial(i)}},this.getTexture=function(){return this.cubeCamera.renderTarget.texture};var A={vertex:["uniform vec4 offsetRepeat;","varying vec2 vUv;","void main() {","    // vUv  = uv;","    vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 3);","}"].join("\n"),fragment:["uniform sampler2D   tDiffuse;","uniform float       exposure;","uniform float       gamma;","varying vec2  vUv;","vec3 decode_pnghdr( const in vec4 color ) {","    vec4 rgbcolor = vec4( 0.0, 0.0, 0.0, 0.0 );","    if ( color.w > 0.0 ) {","        float f = pow(2.0, 127.0*(color.w-0.5));","        rgbcolor.xyz = color.xyz * f;","    }","    return rgbcolor.xyz;","    /*","    // remove gamma correction","    vec4 res = color * color;","    // decoded RI","    float ri = pow( 2.0, res.w * 32.0 - 16.0 );","    // decoded HDR pixel","    res.xyz = res.xyz * ri;","    return res.xyz;","    */","}","void main() {","    vec4 color = texture2D( tDiffuse, vUv );","    color.xyz  = decode_pnghdr( color );","    // apply gamma correction and exposure","    //gl_FragColor = vec4( pow( exposure * color.xyz, vec3( 0.474 ) ), 1.0 );","    // Perform tone-mapping","    float Y = dot(vec4(0.30, 0.59, 0.11, 0.0), color);","    float YD = exposure * (exposure/gamma + 1.0) / (exposure + 1.0);","    color *= YD;","    gl_FragColor = vec4( color.xyz, 1.0 );","}"].join("\n")};this.debug=!1}Object.defineProperties(s.prototype,{link:{set:function(t){this._link!=t&&(this._link=t,this.loadFun())},get:function(){return this._link}},activDiz:{set:function(t){this._activDiz!=t&&(this._activDiz=t)},get:function(){return this._activDiz}},exposure:{set:function(t){this._exposure!=t&&(this._exposure=t,this.material&&null!=this.material.uniforms&&(this.material.uniforms.exposure.value=t,this.upDate()))},get:function(){return this._exposure}},gamma:{set:function(t){this._gamma!=t&&(this._gamma=t,this.material&&null!=this.material.uniforms&&(this.material.uniforms.gamma.value=t,this.upDate()))},get:function(){return this._gamma}},debug:{set:function(t){this._debug!=t&&(this._debug=t,this._layer=t?0:31,this.setLayers(this._layer))},get:function(){return this._debug}}});function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var A=e[i];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(t,A.key,A)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var a=function(){function t(e){n(this,t),this.type="DebagMenu";var i,A,s=this;this.par=e,this.otstup=5,this._vusot=20,this.localStorage=this.par.par.par.par.localStorage,this._active=!1,this.dCont=void 0,this.php,this.menuRome=void 0,this.init=function(){null==this.dCont&&(this.dCont=new DCont(this.par.dCont),this.dCont.visible=this._active,this.w=new DWindow(this.dCont,0,0,"Info"),this.w.width=200,this.w.hasMinimizeButton=!1,this.cont=new DCont(this.w),this.cont.y=32,this.bs=new DButton(this.cont,2,2,"сохронить",function(){s.save()}),this.bs.width=this.w.width-4,this.bppp=new DButton(this.cont,2,36,"от 0 > 12",function(){s.drag0to12()}),this.bppp.width=this.w.width-4,this.bp2=new DButton(this.cont,2,70,"от info1*msn,pros",function(){s.drag0Bablo(1300,.02)}),this.bp2.width=this.w.width-4,this.bp2=new DButton(this.cont,2,104,"Debag FTP",function(){var t=document.createElement("script");t.onload=function(){s.debagThree=new DebagThree(s.cont,2,300,s.par.par.par.visi3D.scene,s.par.par.par.visi3D),s.debagThree.setObj(s.par.par.par.word.content3d)},t.src="src/pm/DebagThree.js",document.head.append(t)}),this.bp2.width=this.w.width-4,this.php=new Php,this.menuRome=new h(this,function(t,e){}))},this.save=function(){if(null!=s.php){trace("dfg==",this.par.par.getObjMod());var t=JSON.stringify(this.par.par.getObjMod());s.php.load({tip:"saveJSON",link:"../resources/configHoom.json",text:t},function(t){})}},this.setRome=function(t){null!=this.php&&this.menuRome.set(t)},null==this.localStorage.object.dubag&&(this.localStorage.object.dubag=!1,this.localStorage.save()),s.active=this.localStorage.object.dubag,s.boolCTRL=!1,this.keydown=function(t){17==event.keyCode&&(s.boolCTRL=!0),81==event.keyCode&&s.boolCTRL&&(s.localStorage.object.dubag=!s.localStorage.object.dubag,s.localStorage.save(),s.active=s.localStorage.object.dubag)},this.keyup=function(t){17==event.keyCode&&(s.boolCTRL=!1)},window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.drag0to12=function(){i=this.par.par.home,A=i.array[1];for(var t=0;t<A.array.length;t++)for(var e=2;e<i.array.length;e++)for(var s=0;s<i.array[e].array.length;s++)A.array[t].name==i.array[e].array[s].name&&(i.array[e].array[s].info=A.array[t].info,i.array[e].array[s].info1=A.array[t].info1,i.array[e].array[s].mani=A.array[t].mani,i.array[e].array[s].colorID=A.array[t].colorID)},this.drag0Bablo=function(t,e){i=this.par.par.home;for(var A=0;A<i.array.length;A++)for(var s=0;s<i.array[A].array.length;s++){var n=t*(1*i.array[A].array[s].info1*(1+e*A));"number"==typeof n&&(n=100*Math.round(n/100),i.array[A].array[s].mani=n+"",0!=i.array[A].array[s].colorID&&(i.array[A].array[s].colorID=2,Math.random()>.4&&(i.array[A].array[s].colorID=1)))}},this.sizeWindow=function(t,e,i){this.verh.sizeWindow(t,e,i),this.niz.sizeWindow(t,e,i)}}return o(t,[{key:"active",set:function(t){this._active!=t&&(this._active=t,1==this._active&&this.init(),this.dCont&&(this.dCont.visible=this._active))},get:function(){return this._active}}]),t}(),h=function(){function t(e){n(this,t),this.type="MenuRome";var i,A=this;this.par=e,this.otstup=5,this._vusot=20,this.dCont=new DCont(this.par.dCont),this.w=new DWindow(this.dCont,200,0,"Room"),this.w.width=200,this.w.hasMinimizeButton=!1,this.w.visible=!1,this.cont=new DCont(this.w),this.cont.y=32,this.rBox,this.dowm=function(){A.index=this.idArr,A.rBox.colorID=this.idArr},this.ab=[];for(var s=0;s<4;s++)(i=new DButton(this.cont,2+34*s,2,s+" ",this.dowm)).idArr=s,i.width=i.width=32,this.ab.push(i);this.input=new DTextArea(this.cont,2,36,"null",function(){A.rBox.info=this.value}),this.input.width=this.w.width-4,this.input.height=64,this.input1=new DTextArea(this.cont,2,104,"null",function(){A.rBox.info1=this.value}),this.input1.width=this.w.width-4,this.input1.height=64,this.w.height=205,this.input2=new DTextArea(this.cont,2,174,"null",function(){A.rBox.mani=this.value}),this.input2.width=this.w.width-4,this.input2.height=64,this.w.height=275,this.set=function(t){this.rBox=t,this.index=t.colorID,this.input.value=t.info,this.input1.value=t.info1,this.input2.value=t.mani,this.w.visible=!0,this.w.text=t.name}}return o(t,[{key:"index",set:function(t){if(this._index!=t){this._index=t;for(var e=0;e<this.ab.length;e++)e==this._index?this.ab[e].alpha=.5:this.ab[e].alpha=1}},get:function(){return this._index}}]),t}();function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var A=e[i];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(t,A.key,A)}}function l(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),t}var u=function(){function t(e){c(this,t),this.type="";this.par=e,this.otstup=5,this._vusot=20,this.dCont=new DCont(this.par.par.dCont),this.verh=new p(this),this.niz=new g(this),this.debagMenu=new a(this),this.sizeWindow=function(t,e,i){this.verh.sizeWindow(t,e,i),this.niz.sizeWindow(t,e,i)}}return l(t,[{key:"index",set:function(t){this._index!=t&&(this._index=t,this.verh.index=t)},get:function(){return this._index}}]),t}(),g=function t(e){c(this,t),this.type="Niz";var i=this;this.par=e,this.dCont=new DCont(this.par.dCont),this.dCont.visible=!1,this._height=100,this._width=100,this.otstup=this.par.otstup,this._vusot=this.par._vusot,this.object={},this.object.openFloor=new DButton(null,0,0,"",null),this.object.openFloor.object.style.borderRadius=this._vusot+"px",this.object.openFloor.color="#00336e",this.object.setInfo=new DPanel(null,0,0);var A=new DLabel(this.object.setInfo,this._vusot,this._vusot,"qq");this.object.setInfo.label=A,this.object.setInfo.div.style.borderRadius=this._vusot+"px",this.object.setInfo.label.textAlign="center",this.object.zabronirovat=new DPanel(null,0,0),this.fD=void 0,this.dddd=function(){trace("this.fD",i.fD),i.fD()};var s=new DButton(this.object.zabronirovat,this.otstup,this.otstup,"Забронировать",this.dddd);s.color="#00336e",this.object.zabronirovat.button=s,this.object.zabronirovat.button.object.style.borderRadius=this._vusot+"px";var n,r,o;A=new DLabel(this.object.zabronirovat,this._vusot,2*this.otstup+s.height,"qq");this.object.zabronirovat.label=A,this.object.zabronirovat.div.style.borderRadius=this._vusot+"px",this.object.zabronirovat.label.width=100,this.object.zabronirovat.label.textAlign="center",this.setMenu=function(t,e,i){for(var A=this.dCont.children.length;A>=0;A--)this.dCont.remove(this.dCont.children[A]);if("openFloor"==t&&(this.dCont.add(this.object.openFloor),this.object.openFloor.text=i,this.object.openFloor.fun=e,this._width=this.object.openFloor.width=200,this._height=this.object.openFloor.height=40,this.dCont.visible=!0,this.sizeWindow()),"setInfo"==t){this.dCont.add(this.object.setInfo),this.object.setInfo.label.text=e;var s=this.object.setInfo.label.getRect();this._width=this.object.setInfo.width=s.width+2*this._vusot,this._height=this.object.setInfo.height=s.height+2*this._vusot,this.dCont.visible=!0,this.sizeWindow()}if("zabronirovat"==t){this.dCont.add(this.object.zabronirovat);var n=!1;if(1==e.colorID&&(n=!0),this.object.zabronirovat.button.visible=n,1==n){this.object.zabronirovat.label.y=this._vusot+this.otstup+this.object.zabronirovat.button.height,this.object.zabronirovat.label.x=1.5*this._vusot,this.object.zabronirovat.label.text=e.info+"\t\n"+e.info1+"м²\n"+e.mani+"$";s=this.object.zabronirovat.label.getRect();this._width=this.object.zabronirovat.width=120+2*this._vusot,this._height=this.object.zabronirovat.height=this.object.zabronirovat.label.y+s.height+this._vusot,this.object.zabronirovat.button.width=this._width-2*this.otstup,this.fD=i}else{this.object.zabronirovat.label.y=this._vusot,this.object.zabronirovat.label.x=this._vusot,this.object.zabronirovat.label.text=e.info,2==e.colorID&&(this.object.zabronirovat.label.text="Куплена");s=this.object.zabronirovat.label.getRect();this._width=this.object.zabronirovat.width=s.width+2*this._vusot,this._height=this.object.zabronirovat.height=this.object.zabronirovat.label.y+s.height+this._vusot}this.dCont.visible=!0,this.sizeWindow()}},this.sizeWindow=function(t,e,i){null!=t&&(n=t,r=e,o=i),0!=this.dCont.visible&&(this.dCont.x=(n/o-this._width)/2,this.dCont.y=r/o-this._height-this.otstup)}},p=function(){function t(e){c(this,t),this.type="Verh";var i=this;this.par=e,this.dCont=new DCont(this.par.dCont),this._index=9999,this.otstup=this.par.otstup,this._vusot=this.par._vusot,this.panel=new DPanel(this.dCont,0,this.par._vusot),this.panel.height=2*this._vusot,this.panel.width=200,this.panel.div.style.borderRadius=this._vusot+"px",this.slider=new DSlider(this.panel,this.otstup,this.otstup/2,function(){i.par.par.index=this.value,trace(i.par.par)}),this.slider.width=this.panel.width-2*this.otstup,this.slider.okrug=1,this.slider.panel.color1="#00336e",this.slider.pan.div.style.borderRadius=this._vusot+"px",this.slider.panel.div.style.borderRadius=this._vusot+"px";var A=2*this._vusot-this.otstup-1;this.slider._height=A,this.slider.pan.height=A-2*this.slider._otstup,this.slider.panel.width=this.slider.panel.height=A,this.slider.value=100,this.sizeWindow=function(t,e,i){this.dCont.x=(t/i-this.panel.width)/2}}return l(t,[{key:"index",set:function(t){this._index!=t&&(this._index=t,this.slider.value=t)},get:function(){return this._index}}]),t}();function f(t,e){for(var i=0;i<e.length;i++){var A=e[i];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(t,A.key,A)}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v=function t(e,i){m(this,t),this.type="Text3dKey";this.par=e,this.content3d=i,this.hron=i.hron,this.object=i.hron.object.fT,this.arrayXZ=[],null!=this.object&&(this.array=[],this.parsing=function(t){if(t.name)for(var e=this.object.array.length-1;e>=0;e--)if(this.object.array[e].key==t.name)return void this.creat(t,this.object.array[e]);if(t.children)for(e=t.children.length-1;e>=0;e--)this.parsing(t.children[e])},this.fun_rotationZ=function(t,e){for(var i=this.arrayXZ.length-1;i>=0;i--)this.arrayXZ[i].fun_rotationZ(t,e)},this.creat=function(t,e){this.array.push(new C(this,t,e))},this.parsing(this.content3d))},C=function t(e,i,A){m(this,t),this.type="Text3dKey";if(this.par=e,this.c3d=i,this.obj=A,this.ccc=new THREE.Object3D,i.parent.add(this.ccc),i.parent.remove(i),this.ccc.position.copy(i.position),this.ccc.rotation.copy(i.rotation),this.ccc.scale.copy(i.scale),this.ccc1=new THREE.Object3D,this.ccc.add(this.ccc1),this.ccc2=new THREE.Object3D,this.ccc1.add(this.ccc2),this.t3d=new TLabel(this.ccc2,0,0,this.obj.text),this.t3d.fontSize=10,this.t3d.colorText1=this.obj.color,this.t3d.x=-this.t3d.width/2,this.t3d.y=this.t3d.fontSize/2,1==this.obj.bool){this.par.arrayXZ.push(this);var s=new THREE.Mesh(new THREE.SphereBufferGeometry(1,8,8),this.t3d.material);this.ccc2.add(s),this.t3d.y=1.1*this.t3d.fontSize}this.fun_rotationZ=function(t,e){this.ccc1.rotation.y=-t,this.ccc2.rotation.x=e-Math.PI/2}},I=function t(e){m(this,t),this.type="T3dKDin";var i;this.par=e,this.content3d=new THREE.Object3D,this.array=[],this.clear=function(){for(var t=this.array.length-1;t>=0;t--)this.array[t].visible=!1;null!=this.content3d.parent&&this.content3d.parent.remove(this.content3d)},this.getObj=function(){for(var t=0;t<this.array.length;t++)if(0==this.array[t].visible)return this.array[t].visible=!0,this.array[t];return this.array.push(new E(this)),this.array[this.array.length-1].idArr=this.array.length-1,this.array[this.array.length-1]},this.set=function(t,e){this.clear(),t.add(this.content3d);for(var A=0;A<e.length;A++)(i=this.getObj()).color=e[A].color,i.text=e[A].text,i.content3d.position.copy(e[A].position);this.fun_rotationZ(this.zz,this.xx)},this.zz,this.xx,this.fun_rotationZ=function(t,e){null!=t&&(this.zz=t,this.xx=e);for(var i=this.array.length-1;i>=0;i--)1==this.array[i].visible&&this.array[i].fun_rotationZ(this.zz,this.xx);this.par.par.visi3D.intRend=1},this.creat=function(t,e){this.array.push(new C(this,t,e))}},E=function(){function t(e){m(this,t),this.type="BodyTDin";this.par=e,this._scale=1,this._color="#999999",this._text="null",this._fontSize=10,this._visible=!0,this.content3d=new THREE.Object3D,e.content3d.add(this.content3d),this.ccc1=new THREE.Object3D,this.content3d.add(this.ccc1),this.ccc2=new THREE.Object3D,this.ccc1.add(this.ccc2),this.t3d=new TLabel(this.ccc2,0,0,this._text),this.t3d.textAlign="center",this.t3d.fontSize=this._fontSize,this.t3d.colorText1=this._color,this.t3d.x=-this.t3d.width/2,this.t3d.y=this.t3d.fontSize/2,this.cube=new THREE.Mesh(new THREE.SphereBufferGeometry(1,8,8),this.t3d.material),this.ccc2.add(this.cube),this.t3d.y=1.1*this._fontSize,this.fun_rotationZ=function(t,e){this.ccc1.rotation.y=-t-Math.PI/2,this.ccc2.rotation.x=e-Math.PI/2}}var e,i,A;return e=t,(i=[{key:"visible",set:function(t){this._visible!=t&&(this._visible=t,this.content3d.visible=t)},get:function(){return this._visible}},{key:"color",set:function(t){this._color!=t&&(this._color=t,this.t3d.colorText1=this._color,this.cube.material=this.t3d.material)},get:function(){return this._color}},{key:"text",set:function(t){this._text!=t&&(this._text=t,this.t3d.text=this._text,this.t3d.x=-this.t3d.width/2,this.t3d.y=this.t3d.height+this._fontSize/2)},get:function(){return this._text}}])&&f(e.prototype,i),A&&f(e,A),t}();function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var i=0;i<e.length;i++){var A=e[i];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(t,A.key,A)}}function y(t,e,i){return e&&b(t.prototype,e),i&&b(t,i),t}var x=function(){function t(e){w(this,t),this.type="";var i=this;this.par=e,this.content3d=new THREE.Object3D,this.par.content3d.add(this.content3d),this.c3dLoad=new THREE.Object3D,this.content3d.add(this.c3dLoad),this.visi3D=void 0,this.oBase=void 0,this.array=[],this.aT=[],this.pm=new PM(this.par.visi3D,this.par.objectBase),this.pm.plus=this.par.par.plus,this.menu=new u(this),this.home=new D(this),this.init=function(t,e){this.visi3D=t,this.oBase=e;for(var i=0;i<this.oBase.three.length;i++)null!=this.oBase.three[i].keyName&&"word"==this.oBase.three[i].keyName&&this.initArray(this.oBase.three[i].array)},this.ai,this.initArray=function(t){this.ai=t,this.pm.finLoad=this.initArray2;for(var e=0,A=0;A<t.length;A++)this.pm.getId(t[A].id,function(A){i.c3dLoad.add(A),e++,i.progrres(e/i.ai.length),t.length==e&&setTimeout(function(){i.initArray2()},1)})},this.progrres=function(t){appLoader.indicator.procent=100*(.7+.299*t)},this.initArray2=function(){if(i.c3dLoad.children.length==i.ai.length){i.par.visi3D.intRend=1;for(var t=i.c3dLoad.children.length-1;t>=0;t--)null!=i.c3dLoad.children[t].hron&&"Text3dKey"==i.c3dLoad.children[t].hron.object.key&&this.aT.push(new v(this,i.c3dLoad.children[t])),"hron_13"==i.c3dLoad.children[t].name&&i.initArray3(i.c3dLoad.children[t])}},this.initArray3=function(t){1==i.pm.mat.testObjMatLoad(t)?(i.home.setObj(t),i.setObjMod(i.par.par.configHoom),i.visi3D.intRend=1,setTimeout(function(){i.visi3D.intRend=1,i.par.par.finaFFF()},10)):setTimeout(function(){i.initArray3(t)},200)},this.testMat=function(t){return!0},this.getObjToId=function(t){for(var e=0;e<this.oBase.bd.length;e++)if(this.oBase.bd[e].id==t)return this.oBase.bd[e];return null},this.out=function(t){0!=i.boolDrag&&t&&t.target&&t.target.rBox&&(i.home.indexVisi=9999,t.target.rBox.par.active&&0==i.boolDrag1&&i.menu.niz.setMenu(),1==t.target.rBox.par.active&&t.target.rBox.out(t))},this.over=function(t){if(0!=i.boolDrag&&t&&t.target&&t.target.rBox){if(i.home.indexVisi=t.target.rBox.par.idArr,t.target.rBox.par.active&&null!=t.target.rBox.info&&0==i.boolDrag1){var e="vvvvvvvv";2==t.target.rBox.colorID&&(e="Квартира куплена."),0==t.target.rBox.colorID&&(e=t.target.rBox.info),1==t.target.rBox.colorID&&(e=t.target.rBox.info1+"м²\n"+t.target.rBox.mani+"$"),i.menu.niz.setMenu("setInfo",e)}1==t.target.rBox.par.active&&t.target.rBox.over(t)}},this.boolDrag=!0,this.boolDrag1=!1,this.pozitDrah=0,this.pozitFun=function(t){i.index=i.pozitDrah},this.bronDrah=null,this.bronFun=function(t){trace("dsfgdsgdsfgdsgfdsfgdsfg!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),i.bronDrah.colorID=2,i.home.array[i.home._index]&&i.home.array[i.home._index].activText(),0==i.boolDrag1&&(i.boolDrag1=!0,0==dcmParam.mobile?document.addEventListener("mousedown",i.mouseup1):document.addEventListener("touchstart",i.mouseup1))},this.down=function(t){i.menu.niz.setMenu(),0!=i.boolDrag&&t&&t.target&&t.target.rBox&&(0==t.target.rBox.par.active?(i.boolDrag=!1,i.home.openFloor(t.target.rBox.par.idArr),t.target.rBox.par.activText(),i.pozitDrah=t.target.rBox.par.idArr,i.menu.niz.setMenu("openFloor",i.pozitFun,"Открыть этаж "+i.pozitDrah),0==dcmParam.mobile?document.addEventListener("mouseup",i.mouseup):document.addEventListener("touchend",i.mouseup)):(setTimeout(function(){0==i.boolDrag1&&(i.boolDrag1=!0,0==dcmParam.mobile?document.addEventListener("mousedown",i.mouseup1):document.addEventListener("touchstart",i.mouseup1))},1),trace("dsfgdsgdsfgdsgfdsfgdsfg!!!>>>>>>>!!!!!!!!!!!"),i.bronDrah=t.target.rBox,i.menu.niz.setMenu("zabronirovat",t.target.rBox,i.bronFun),i.menu.debagMenu.setRome(t.target.rBox)),t.target.rBox&&t.target.rBox.down(t))},this.mouseup=function(t){i.boolDrag=!0,i.home.array[i.home._index]&&i.home.array[i.home._index].activText(),0==dcmParam.mobile?document.removeEventListener("mouseup",i.mouseup):document.removeEventListener("touchend",i.mouseup),i.home.openFloor(999)},this.mouseup1=function(t){i.boolDrag1=!1,0==dcmParam.mobile?document.removeEventListener("mousedown",i.mouseup1):document.removeEventListener("touchstart",i.mouseup1)},i.par.visi3D.addEvent("out",this.out),i.par.visi3D.addEvent("over",this.over),i.par.visi3D.addEvent("down",this.down),this.getObjMod=function(){var t={};return t.home=this.home.getObjMod(),t},this.setObjMod=function(t){t.home&&this.home.setObjMod(t.home)},this.upDate=function(){},this.sizeWindow=function(t,e,i){this.menu.sizeWindow(t,e,i)},this.fun_rotationZ=function(t,e){for(var i=this.aT.length-1;i>=0;i--)this.aT[i].fun_rotationZ(t,e);this.home&&this.home.t3dKDin.fun_rotationZ(t,e)}}return y(t,[{key:"index",set:function(t){this._index!=t&&(this._index=t,this.menu.index=t,this.home.index=t,this.visi3D.intRend=0)},get:function(){return this._index}}]),t}(),D=function(){function t(e){w(this,t),this.type="Home";this.par=e,this.object=this.par.par.par.configHoom,this._index=9999,this._indexVisi=9999,this.content3d=new THREE.Object3D,this.par.content3d.add(this.content3d),this.array=[],this.matBD=new M(this),this.t3dKDin=new I(this),this.sob=function(t,e){},this.lc3d,this.setObj=function(t){this.lc3d=t,t.parent.remove(t),this.content3d.position.set(t.position.x,t.position.y,t.position.z),this.content3d.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),this.content3d.scale.set(t.scale.x,t.scale.y,t.scale.z);for(var e=t.children.length-1;e>=0;e--)"niz"==t.children[e].name&&(t.children[e].position.set(0,0,0),this.matBD.setObj3D(t.children[e]),this.kreutFloor(t.children[e],1));for(e=t.children.length-1;e>=0;e--)"floor"==t.children[e].name&&(t.children[e].position.set(0,0,0),this.matBD.setObj3D(t.children[e]),this.groupGeometri(t.children[e]),this.kreutFloor(t.children[e],12,!0));for(e=t.children.length-1;e>=0;e--)"verh"==t.children[e].name&&(t.children[e].position.set(0,0,0),this.matBD.setObj3D(t.children[e]),this.kreutFloor(t.children[e],1));this.finalLoad(),this.array[0].parking()},this.groupGeometri=function(t){for(var e=0;e<t.children.length;e++)this.par.pm.filt.ceshGeom.groupGeometri(t.children[e])},this.kreutFloor=function(t,e,i){for(var A=0;A<e;A++)this.array.push(new _(this,t,this.array.length,this.sob,i))},this.finalLoad=function(){this.matBD.init();for(var t=0;t<this.array.length;t++)for(var e=0;e<this.array[t].array.length;e++)this.array[t].array[e].init(this.matBD);this.par.menu.verh.slider.max=this.array.length},this.openFloor=function(t){for(var e=0;e<this.array.length;e++)this.array[e].alpha=e<=t?1:0,e==t?this.array[e].activVisi=2:1==this.array[e].active?this.array[e].activVisi=2:this.array[e].activVisi=0},this.getObjMod=function(){for(var t={array:[]},e=0;e<this.array.length;e++)t.array[e]=this.array[e].getObjMod();return t},this.setObjMod=function(t){if(t.array)for(var e=0;e<this.array.length;e++)null!=t.array[e]&&this.array[e].setObjMod(t.array[e])}}return y(t,[{key:"indexVisi",set:function(t){if(this._indexVisi!=t){this._indexVisi=t;for(var e=0;e<this.array.length;e++)0==this.array[e].active&&(this.array[e].activVisi=t==e?1:0)}},get:function(){return this._indexVisi}},{key:"index",set:function(t){if(this._index!=t){this._index=t;for(var e=0;e<this.array.length;e++)this.array[e].content3d.visible=!(e>t),this.array[e].active=e==t}},get:function(){return this._index}}]),t}(),_=function(){function t(e,i,A,s,n){w(this,t),this.type="Floor";this.par=e,this.c3d=i.clone(),this.idArr=A,this.fun=s,this._active=!1,this.content3d=new THREE.Object3D,this.par.content3d.add(this.content3d),this.content3d.position.y=35*A,this.array=[],this.content3d.add(this.c3d),this.sob=function(t,e){},this.korekt=function(t){},this.korekt2=function(t){if(null!=t.material&&t.material.opacity<.99&&(t.renderOrder=1,t.position.x+=33),t.children)for(var e=t.children.length-1;e>=0;e--)this.korekt2(t.children[e])};for(var r=0;r<this.c3d.children.length;r++)r,null!=n&&this.korekt(this.c3d.children[r]),this.array.push(new R(this,this.c3d.children[r],this.array.length,this.sob,null));this.getObjMod=function(){for(var t={array:[]},e=0;e<this.array.length;e++)t.array[e]=this.array[e].getObjMod();return t},this.boolPark=!1,this.parking=function(){this.boolPark=!0;for(var t=0;t<this.array.length;t++)this.array[t].parking()},this.setObjMod=function(t){for(var e=0;e<this.array.length;e++)for(var i=0;i<t.array.length;i++)t.array[i].name==this.array[e].name&&this.array[e].setObjMod(t.array[e])},this.getArrText=function(){for(var t=[],e=0;e<this.array.length;e++)this.array[e].getArr(t);return t},this.activText=function(){this.par.t3dKDin.set(this.content3d,this.getArrText())}}return y(t,[{key:"active",set:function(t){if(this._active!=t){this._active=t;for(var e=0;e<this.array.length;e++)0==this._active?this.array[e].activVisi=0:this.array[e].activVisi=2;1==this._active&&this.activText()}},get:function(){return this._active}},{key:"alpha",set:function(t){this._alpha=t;for(var e=0;e<this.array.length;e++)this.array[e].alpha=this._alpha},get:function(){return this._alpha}},{key:"colorID",set:function(t){this._colorID=t;for(var e=0;e<this.array.length;e++)this.array[e].colorID=this._colorID},get:function(){return this._colorID}},{key:"activVisi",set:function(t){this._activVisi=t;for(var e=0;e<this.array.length;e++)this.array[e].activVisi=this._activVisi},get:function(){return this._activVisi}}]),t}(),R=function(){function t(e,i,A,s,n){w(this,t),this.type="RBox";this.par=e,this.c3d=i,this.idArr=A,this.fun=s,this.oCon=n,this.array=[],this.matBD=void 0,this._activeLitel=!1,this._active=!1,this._activVisi=0,this._alpha=1,this.positionText=void 0,this._name=i.name;for(var r=["room0","Group1574","room1","Group355","room2","Group151","room3","Group243","room4","Group274","room5","Group273","room6","Group242","room7","Group1572","room8","Group356"],o=0;o<r.length;o+=2)r[o+1]&&this._name==r[o+1]&&(this._name=r[o]);this._info="asdasdf;"+Math.random(),this._info1="_info1",this._mani="null",Math.random()>.5&&(this._info+=";sdrgsd"),this._colorID=Math.round(4*Math.random()),this.init=function(t){this.matBD=t;for(var e=0;e<this.c3d.children.length;e++)this.c3d.children[e].material&&"materialMaskk"==this.c3d.children[e].material.name&&(this.c3d.children[e].layers.set(31),this.c3d.children[e].rBox=this,this.par.par.par.visi3D.addChildMouse(this.c3d.children[e]));for(e=0;e<this.c3d.children.length;e++)if(-1!=this.c3d.children[e].name.indexOf("positionText")){this.positionText=this.c3d.children[e].position,this.c3d.children[e].visible=!1;break}this.setObj3D(this.c3d)},this.boolPark=!1,this.arrPlus=[],this.parking=function(){this.boolPark=!0,this.parkPars(this.c3d)},this.parkPars=function(t){if(t.children)for(var e=0;e<t.children.length;e++)this.parkPars(t.children[e]);t.material&&"mn|mestoAvto"==t.material.name&&this.sssssssss(t)},this.sssssssss=function(t){for(var e=0;e<this.array.length;e++)if(this.array[e].uuid==t.uuid){this.array.splice(e,1);break}this.arrPlus.push(new T(this,t))};var a={};this.getArr=function(t){null!=this.positionText&&(0==this._colorID&&(a.text=this._info,a.color="#999999",a.position=this.positionText),1==this._colorID&&(a.text="Свободна\n"+this._info1+"м²\n"+this._mani+"$",a.color="#99ff99",a.position=this.positionText),2==this._colorID&&(a.text="Куплана",a.color="#ff9999",a.position=this.positionText),t.push(a));for(var e=0;e<this.arrPlus.length;e++)t.push(this.arrPlus[e].oText)},this.setObj3D=function(t){if(null!=t.material&&(this.array.push(t),t.idArrMat=this.matBD.getIdArr(t.material)),t.children)for(var e=0;e<t.children.length;e++)this.setObj3D(t.children[e])},this.dragColor=function(t,e,i){this._alpha=i,this._colorID=e,this._activVisi=t;for(var A=0;A<this.array.length;A++)this.matBD.dragColor(this.array[A],this._activVisi,this._colorID,this._alpha);this.par.par.par.par.visi3D.intRend=1},this.getObjMod=function(){var t={};return t.name=this._name,t.info=this.info,t.info1=this.info1,t.colorID=this.colorID,t.mani=this.mani,t},this.setObjMod=function(t){null!=t&&t.name==t.name&&(this.info=t.info,this.info1=t.info1,this.colorID=t.colorID,this.mani=t.mani)},this.out=function(t){this.activVisi=2},this.over=function(t){this.activVisi=1},this.down=function(t){}}return y(t,[{key:"name",set:function(t){this._name!=t&&(this._name=t)},get:function(){return this._name}},{key:"mani",set:function(t){this._mani!=t&&(this._mani=t)},get:function(){return this._mani}},{key:"info1",set:function(t){this._info1!=t&&(this._info1=t)},get:function(){return this._info1}},{key:"info",set:function(t){this._info!=t&&(this._info=t)},get:function(){return this._info}},{key:"alpha",set:function(t){this._alpha!=t&&(this._alpha=t,this.dragColor(this._activVisi,this._colorID,this._alpha))},get:function(){return this._alpha}},{key:"colorID",set:function(t){this._colorID!=t&&(this._colorID=t,this.dragColor(this._activVisi,this._colorID,this._alpha))},get:function(){return this._colorID}},{key:"activVisi",set:function(t){this._activVisi!=t&&(this._activVisi=t,this.dragColor(this._activVisi,this._colorID,this._alpha))},get:function(){return this._activVisi}}]),t}(),T=function t(e,i){w(this,t),this.type="MatBD";this.par=e,this.c3d=i,this._alpha=1,this._colorID=0,Math.random()>.5&&(this._colorID=2),this._activVisi=0;var A=this.par.matBD.getMatBox("mn|belomat");this.c3d.material=A.array[this._colorID][2][1],this.position=new THREE.Vector3,this.position.set(this.c3d.position.x,this.c3d.position.y,this.c3d.position.z),this.oText={},0==this._colorID&&(this.oText.text="Свободно",this.oText.color="#99ff99",this.oText.position=this.position),2==this._colorID&&(this.oText.text="Выкуплено",this.oText.color="#ff9999",this.oText.position=this.position)},M=function t(e){w(this,t),this.type="MatBD";this.par=e,this.array=[],this.arColor=[2105376,1052688,3145728,2105376,8224],this.arVisi=[0,.5,1],this.arAlpha=[.1,1],this.setObj3D=function(t){if(null!=t.material&&this.poisk(t.material),t.children)for(var e=0;e<t.children.length;e++)this.setObj3D(t.children[e])},this.init=function(){for(var t=0;t<this.array.length;t++);},this.getMatBox=function(t){for(var e=0;e<this.array.length;e++)if(this.par.matBD.array[e].mat.name==t)return this.par.matBD.array[e];return null},this.dragColor=function(t,e,i,A){this.array[t.idArrMat].dragColor(t,e,i,A)},this.poisk=function(t){for(var e=0;e<this.array.length;e++)if(this.array[e].uuid==t.uuid)return;this.array.push(new B(this,t))},this.getIdArr=function(t){for(var e=0;e<this.array.length;e++)if(this.array[e].uuid==t.uuid)return e;return null}},B=function t(e,i){w(this,t),this.type="MatBD",this.mat=i,this.par=e,this.uuid=i.uuid,this.arColor=this.par.arColor,this.arVisi=this.par.arVisi,this.arAlpha=this.par.arAlpha,this.array=[];for(var A=0;A<this.arColor.length;A++){this.array[A]=[];for(var s=0;s<this.arVisi.length;s++){this.array[A][s]=[];for(var n=0;n<this.arAlpha.length;n++){this.array[A][s][n]=this.mat.clone();var r=new THREE.Color(this.arColor[A]);1!=this.arVisi[s]&&(r.r=r.r*this.arVisi[s],r.g=r.g*this.arVisi[s],r.b=r.b*this.arVisi[s]),this.array[A][s][n].emissive=r,1!=this.arAlpha[n]&&(this.array[A][s][n].transparent=!0,this.array[A][s][n].opacity=this.mat.opacity*this.arAlpha[n])}}}this.dragColor=function(t,e,i,A){t.material=this.array[i][e][A]}};var S=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Glaf";var i=this;this.content3d=new THREE.Object3D;this.scale=1,this.dCont=void 0,this.main=e,this.par=e,this.otstup=5,this.widthBig=182,this.objectBase=this.par.objectBase,this.resurs="resources/",this.resursPlus="data/",this.resursData=this.resurs+this.resursPlus,this.plusLink="",this.ser=window.location.href;var n=this.ser.split("?")[0].split("index");this.debug=!1,1==e.localStorage.object.dubag&&(this.debug=!0),this.server=n[0],null!=e.localStorage.object.otstup&&(this.otstup=e.localStorage.object.otstup),new Calc,dcmParam.color="#c7edfc",dcmParam.color1="#e2e7ed",dcmParam.colorText1="#424242",dcmParam.fontFamily="SFUIDisplay-Bold",tStyle._fontFamily="SFUIDisplay-Light",tStyle.glaf=this,dcmParam.styleInput=function(t,e){if(t.height=32,t.object.style.borderRadius=t.height/2+"px",t.object.style.fontFamily="SFUIDisplay-Light",t.fontSize=20,t._color2="#4896b8",t.object.style.background="#ffffff",t.numLine=0,null!=e){var i=e;t.text=i,t.funFocus=function(){1==this.boolFocus&&this.text==i&&(this.text=""),0==this.boolFocus&&""==this.text&&(this.text=i)}}},this.visi3D=new A.a(e.contentHTML,null,dcmParam.mobile,!0,!0,!0,!0),this.visi3D.yes3d=!0,this.visi3D.groupObject.add(this.content3d),this.content3d.rotation.x=-Math.PI/2,this.content3d.position.z=24.5,this.visi3D.cubeMap=new s,this.visi3D.cubeMap.init(this.visi3D.renderer,this.visi3D.scene),this.visi3D.getEnvMap=function(){return i.visi3D.cubeMap.getTexture()},this.visi3D.fun_rotationZ=function(){i.word&&i.word.fun_rotationZ(this._rotationZ,this._rotationX)},this.sceneSB=new SceneSB(this.visi3D);for(var r=0;r<this.sceneSB.array.length;r++)void 0===e.objectBase.scene[this.sceneSB.array[r].name]&&(e.objectBase.scene[this.sceneSB.array[r].name]={}),this.sceneSB.array[r].setBasa(e.objectBase.scene[this.sceneSB.array[r].name]);this.visi3D.utility.plane&&(this.visi3D.utility.plane.position.z=2),0==dcmParam.mobile&&document.addEventListener("mousewheel",function(t){}),this.touchmove=function(t){t.preventDefault(),i.visi3D.position3d.stageMoveNew(t),i.visi3D.event3DArr.mousemove(t),t.stopPropagation()},1==dcmParam.mobile&&(this.visi3D.renderer.domElement.addEventListener("touchmove",this.touchmove,{passive:!1,capture:!0}),this.visi3D.position3d.div.removeEventListener("touchmove",this.visi3D.position3d.stageMoveNew,{passive:!1,capture:!0}),window.removeEventListener("touchmove",this.visi3D.event3DArr.mousemove)),this.dCont=new DCont(e.contentHTML),this.dContPod=new DCont(this.dCont),this.dContNad=new DCont;n=this.par.plus.split(".");this.label=new DLabel(this.dCont,0,0,"version: 2."+n[1]),this.label.fontSize=12,this.label.div.style.pointerEvents="none",this.word=new x(this),this.word.init(this.visi3D,e.objectBase),this.word.fun_rotationZ(this.visi3D._rotationZ,this.visi3D._rotationX),this.update=function(){this.visi3D.upDate(),this.word.upDate()},this.sizeWindow=function(t,e,i){this.scale=i,this.dCont.scale=i,this.visi3D.sizeWindow(0,0,t,e),this.word.sizeWindow(t,e,i),this.label.x=t/i-80,this.label.y=e/i-14}};function H(t,e){this.fun=t;var i,A=this;this.object,this.key=e||"shirt",this.object,this.initLoad=function(){i=!0,this.object=window.localStorage[this.key],"undefined"==this.object&&(i=!1),null==this.object&&(i=!1),this.object=0==i?this.getStartObj():jQuery.parseJSON(this.object),this.fun&&A.fun()},this.getStartObj=function(){return{activ:!1,dubag:!1,menu:{},xz:{}}},this.save=function(){window.localStorage[this.key]=JSON.stringify(A.object)},this.clear=function(){window.localStorage[this.key]=void 0},A.initLoad()}i.d(e,"a",function(){return j});var j=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="Main",this.plus=i;var A=this;this.glaf=null,this._width=100,this._height=100,A.resolution=1,A.objectBase=null,A.configHoom=null,this.localStorage=void 0,this.contentHTML=document.createElement("div"),this.contentHTML.style.position="fixed",this.contentHTML.style.top="0px",this.contentHTML.style.left="0px",document.body.appendChild(this.contentHTML),this.start=function(){var t=new PIXI.ticker.Ticker;t.minFPS=50,t.add(this.tick,this),t.start(),this.localStorage=new H(null,"bnilding"),this.fina()},this.fina=function(){A.glaf=new S(A),document.body.removeChild(appLoader.indicator.divGlob),document.body.appendChild(appLoader.indicator.divGlob),sizeWindow()},this.finaFFF=function(){var t=new TWEEN.Tween(this);t.to({pTween:0},1e3).start(),t.onUpdate(function(){appLoader.indicator.divGlob.style.opacity=A.pTween}),t.onComplete(function(){A.glaf.visi3D.intRend=1,e("init")}),new TWEEN.Tween(A.glaf.visi3D).to({zume:95},1e3).start()},this.pTween=1;var s,n=!0;this.tick=function(){1!=(n=!n)&&(TWEEN.update(),A.glaf&&A.glaf.update())},this.scale=1,this.sizeWindow=function(t,e){A._width=t,A._height=e,A._width<200&&(A._width=200),A._height<200&&(A._height=200),(s=t/A._width)>e/A._height&&(s=e/A._height),this.scale=s,1==dcmParam.isIE&&(this.scale=1),A.glaf&&A.glaf.sizeWindow(t,e,this.scale)},this.startText=function(){$.ajax({url:"resources/configHoom.json"+this.plus,success:function(t){if("string"==typeof t){var e=JSON.parse(t);A.configHoom=e}else A.configHoom=t;A.start()},error:function(t){console.log("Что то случилось с конфигом")}})},$.ajax({url:"resources/config.json"+this.plus,success:function(t){if("string"==typeof t){var e=JSON.parse(t);A.objectBase=e}else A.objectBase=t;A.startText()},error:function(t){console.log("Что то случилось с конфигом")}})}},function(t,e,i){"use strict";function A(){var t=this,e=256,i=256,A=new THREE.Scene,s=new THREE.OrthographicCamera(e/-2,e/2,i/2,i/-2,.001,1e4),n=(new THREE.Clock,new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}));s.position.set(200,200,200),A.add(s),this.camera=s,this.fotoContainer=new THREE.Object3D,A.add(this.fotoContainer),A.background=new THREE.Color(38655),n.setPixelRatio(window.devicePixelRatio),n.setSize(e,i),n.localClippingEnabled=!0;var r=document.createElement("div");r.style.position="absolute",r.style.bottom="0px",r.style.left="0px",r.appendChild(n.domElement),this.contentHTML=r,this.canvas=n.domElement,this.contentHTML=r;var o=new THREE.AmbientLight("#ffffff",1);A.add(o);var a=new THREE.GridHelper(1e3,10),h=new THREE.AxesHelper(100),c=new THREE.BoxHelper(this.fotoContainer,16776960);A.add(a),A.add(h),A.add(c);var d=[h,a,c];function l(){n.render(A,s)}this.render=l,l(),c.setFromObject(t.fotoContainer);var u=new THREE.Box3,g=new THREE.Vector3;this.box=u,this.center=g,this.setSize=function(t,A){e=t,i=A,n.setSize(e,i),s.aspect=e/i,s.updateProjectionMatrix()},this.addObjFoto=function(t){this.fotoContainer.add(t),c.setFromObject(this.fotoContainer)},this.removeObjFoto=function(t){this.fotoContainer.remove(t)},this.moveToObj=function(e){u.setFromObject(e||t.fotoContainer);var i=u.max.x-u.min.x,A=u.max.z-u.min.z;t.moveToRect(u.min.x,u.min.z,i,A)},this.moveToRect=function(t,e,i,A){if(t+=i/2,e+=A/2,g.set(t,0,e),s.position.set(g.x,9e3,g.z),s.lookAt(g),"OrthographicCamera"===s.type){var n=Math.max(A,i);s.zoom=1,s.left=n/-2,s.right=n/2,s.top=n/2,s.bottom=n/-2,s.aspect=n/n}s.updateProjectionMatrix()},this.getFoto=function(t){t=t||1024;for(var s=0;s<d.length;s++)d[s].visible=!1;var r=A.background;A.background=null,n.setSize(t,t),l();var o=n.domElement.toDataURL("image/png");n.setSize(e,i),A.background=r;for(var a=0;a<d.length;a++)d[a].visible=!0;return l(),o},this.getCanvas=function(t){t=t||1024;for(var e=0;e<d.length;e++)d[e].visible=!1;A.background;A.background=null;var i=n.getSize();return i.width==t&&i.height==t||n.setSize(t,t),l(),n.domElement}}function s(t){var e=this,i=THREE.Math.generateUUID(),s=new THREE.Vector3(0,1,0),a=(new THREE.Plane(s,.01),new THREE.Vector4(0,999,0,.001)),h=new THREE.Box3,c=t||new A;this.foto3D=c;var d=new THREE.Vector2(0,0),l=100,u=new r;this.canvas=u.canvas,this.isTime=!1;var g=new THREE.Texture(u.canvas);this.texturePlan=g,this.matPlan=new THREE.MeshPhongMaterial({transparent:!0,side:THREE.DoubleSide,map:g});var p=new o;this.canvasGG=p,p.arrColorStopTranspanent[0]=.15,p.arrProcent[0]=.82,p.arrColorStopTranspanent[1]=1,p.arrProcent[1]=1,p.update();var f=new THREE.Texture(p.canvas);f.needsUpdate=!0,this.textureShadow=f,this.content3d=new THREE.Object3D,this.shadowContent3d=new THREE.Object3D,this.meshPlan=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),this.matPlan),this.meshPlan.rotation.x=-Math.PI/2,this.content3d.add(this.meshPlan);var m=new THREE.Mesh(new THREE.SphereBufferGeometry(10,16,16));m.position.set(a.x,a.y,a.z),this.arrShadowMesh=[],this.arrObj=[],this._dunamic=!0,this.dirty=!0,this._lightPosition4D=a,this._fotoPosition=new THREE.Vector2(0,0),this._fotoWH=150,this._imgWH=512,this._imgBlur=1,this._imgAlpha=1,this._offsetY=0,this._scaleShadow=1,this._isDinamFotoRect=!1,this._opacityMat=1;var v=[new THREE.Plane(new THREE.Vector3(0,-1,0),100),new THREE.Plane(new THREE.Vector3(0,1,0),0)];this._shadowMaterial=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!0,opacity:this._opacityMat,depthWrite:!1,map:f,clippingPlanes:v,clipIntersection:!1}),this.arrDataSempl=[],this.arrDataSempl.push(new n(0,200,3,1));var C=new THREE.Group;this.content3d.add(C);var I=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:f,transparent:!0}));I.scale.set(1,30,1),I.rotation.z=-Math.PI/2,C.add(I),C.visible=!1,this.helpers=C,this.setConstMax=function(t){v[0].constant=t},this.setConstMin=function(t){v[1].constant=-t},this.addObj=function(t){if(-1==e.arrObj.indexOf(t)){t.updateMatrixWorld();var i=t.clone();!function t(e,i){e.userData.targetObject=i;for(var A=0;A<e.children.length;A++){if(!i.children[A])throw new Error("обекты не одинаковы");t(e.children[A],i.children[A])}}(i,t),function(t){var i=[];!function t(e,i){"Mesh"==e.type&&i.push(e);for(var A=0;A<e.children.length;A++)"Mesh"==e.type?i.push(e.children[A]):t(e.children[A],i)}(t,i);for(var A=0;A<i.length;A++)i[A].material=e._shadowMaterial}(i),e.arrShadowMesh.push(i),e.arrObj.push(t),e.shadowContent3d.add(i),this.dirty=!0}},this.removeObj=function(t){var i=e.arrObj.indexOf(t);-1!=i&&(e.arrObj.splice(i,1),e.shadowContent3d.remove(e.arrShadowMesh[i]),e.arrShadowMesh.splice(i,1),this.dirty=!0)},this.clear=function(){for(var t=0;(t=e.arrObj.length)>0;)if(e.removeObj(e.arrObj[t-1]),t===e.arrObj.length)throw new Error("object not remove")},this.intRend=1,this.intRendOk=1,this.upDate=function(){e.opacityMat&&(e.dunamic&&(e.intRend=e.intRendOk),e.intRend==e.intRendOk&&(e.dirty||function(){for(var t=0;t<e.arrShadowMesh.length;t++)if((e._isDinamFotoRect||E(e.arrShadowMesh[t]))&&w(e.arrShadowMesh[t]))return!0;return!1}())&&e.render(),e.intRend++)};function E(t){var i=!1,A=!1,s=h.min.x,n=h.min.z,r=h.max.x-h.min.x,o=h.max.z-h.min.z;if(h.setFromObject(t.userData.targetObject),i=T(s=h.min.x,n=h.min.z,r=h.max.x-h.min.x,o=h.max.z-h.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),h.setFromObject(t),A=T(s=h.min.x,n=h.min.z,r=h.max.x-h.min.x,o=h.max.z-h.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),!i&&!A)return!1;i=!1,A=!1;for(var a=0;a<t.children.length;a++)if(h.setFromObject(t.children[a].userData.targetObject),s=h.min.x,n=h.min.z,r=h.max.x-h.min.x,o=h.max.z-h.min.z,i=i||T(s,n,r,o,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),h.setFromObject(t.children[a]),s=h.min.x,n=h.min.z,r=h.max.x-h.min.x,o=h.max.z-h.min.z,A=A||T(s,n,r,o,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH),i||A)return!0;return!0}function w(t){if(!function(t,e){if(t.position.equals(e.position)&&t.quaternion.equals(e.quaternion)&&t.scale.equals(e.scale)&&t.visible===e.visible)return!0;return!1}(t,t.userData.targetObject))return!0;for(var e=0;e<t.children.length;e++)if(w(t.children[e]))return!0;return!1}function b(t){!function(t,e){t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale),t.visible=e.visible}(t,t.userData.targetObject);for(var e=0;e<t.children.length;e++)b(t.children[e])}this.render=function(){e.isTime&&console.time("render "+i),e.dirty=!1,function(){a.w=.001,m.position.set(a.x,a.y,a.z);for(var t=0;t<e.arrShadowMesh.length;t++)b(e.arrShadowMesh[t]);_()}(),c.addObjFoto(e.shadowContent3d),l=e.fotoWH,d.x=e.fotoPosition.x,d.y=e.fotoPosition.y,e.isDinamFotoRect&&(h.setFromObject(e.shadowContent3d),d.x=h.min.x,d.y=h.min.z,l=Math.max(h.max.x-h.min.x,h.max.z-h.min.z),d.x-=100,d.y-=100,l+=200),c.moveToRect(d.x,d.y,l,l),function(){var t=c.getCanvas(e.imgWH);u.setCanvas(t),0==e.arrDataSempl.length&&u.update();for(var i=0;i<e.arrDataSempl.length;i++)e.setConstMin(e.arrDataSempl[i].min*e._scaleShadow+e._offsetY),e.setConstMax(e.arrDataSempl[i].max*e._scaleShadow+e._offsetY),c.render(),u._blur=e.arrDataSempl[i].blur+(e._scaleShadow>1?e._scaleShadow:0),u._alpha=e.arrDataSempl[i].alpha,u.update();e.setConstMin(-999999),e.setConstMax(999999),g.needsUpdate=!0}(),e.meshPlan.scale.set(l,l,1),e.meshPlan.position.set(d.x+l/2,0,d.y+l/2),e.isTime&&console.timeEnd("render "+i),e.onUpdate&&e.onUpdate()};var y=new THREE.Box3(new THREE.Vector3,new THREE.Vector3(300,300,300));this.boundingBoxUv=y;var x=new THREE.Vector3;function D(t){if("Mesh"===t.type){var i=!1,A=t.getWorldPosition(t.position),s=t.getWorldQuaternion(t.quaternion),n=e.maxHeight;A.y-=e._offsetY,t.userData.pos?t.userData.pos.y!=A.y?i=!0:t.userData.rot.equals(s)?t.userData.maxHeight!==n?i=!0:t.userData.scaleShadow!==e._scaleShadow&&(i=!0):i=!0:i=!0,e._isDinamFotoRect||(h.setFromObject(t),T(h.min.x,h.min.z,h.max.x-h.min.x,h.max.z-h.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH)||(i=!1)),i&&(!function(t){t.geometry.uuid===t.userData.targetObject.geometry.uuid&&(t.geometry=t.userData.targetObject.geometry.clone());var i=y,A=0;if(t.geometry instanceof THREE.Geometry){for(var s=t.geometry.faces,n=t.geometry.vertices,r=t.geometry.faceVertexUvs[0],o=0;o<s.length;o++)x.set(n[s[o].a].x,n[s[o].a].y,n[s[o].a].z),t.localToWorld(x),A=1-M(x.y-e._offsetY,i.min.y,i.min.y+i.max.y)/100,r[o][0].set(A,A),x.set(n[s[o].b].x,n[s[o].b].y,n[s[o].b].z),t.localToWorld(x),A=1-M(x.y-e._offsetY,i.min.y,i.min.y+i.max.y)/100,r[o][1].set(A,A),x.set(n[s[o].c].x,n[s[o].c].y,n[s[o].c].z),t.localToWorld(x),A=1-M(x.y-e._offsetY,i.min.y,i.min.y+i.max.y)/100,r[o][2].set(A,A);t.geometry.uvsNeedUpdate=!0}else{var a=t.geometry.attributes.position.array;t.geometry.attributes.uv||(arrUvAttribut=new Float32Array(a.length/3*2),t.geometry.addAttribute("uv",new THREE.BufferAttribute(arrUvAttribut,2)));var h=t.geometry.attributes.uv.array,c=(t.geometry.attributes.uv.itemSize,t.geometry.index.array),d=t.geometry.index.count;for(o=0;o<d;o++){var l=c[o],u=3*l,g=2*l;x.set(a[u],a[u+1],a[u+2]),t.localToWorld(x),A=1-M(x.y-e._offsetY,i.min.y,i.min.y+i.max.y*e._scaleShadow)/100,h[g]=A,h[g+1]=A}t.geometry.attributes.uv.needsUpdate=!0}}(t),t.userData.pos=A,t.userData.rot=s,t.userData.maxHeight=n,t.userData.scaleShadow=e._scaleShadow)}for(var r=0;r<t.children.length;r++)D(t.children[r])}function _(){I.scale.x=(e.boundingBoxUv.max.y||1)*e._scaleShadow,I.position.y=I.scale.x/2+e.boundingBoxUv.min.y;for(var t=0;t<e.arrShadowMesh.length;t++)(e._isDinamFotoRect||(h.setFromObject(e.arrShadowMesh[t]),T(h.min.x,h.min.z,h.max.x-h.min.x,h.max.z-h.min.z,e.fotoPosition.x,e.fotoPosition.y,e.fotoWH,e.fotoWH)))&&D(e.arrShadowMesh[t])}this.updateShadowUv=_,this.updateShadowTexture=function(){this.canvasGG.update(),this.textureShadow.needsUpdate=!0},this.setShadowColor=function(t,i,A){p.r=t,p.g=i,p.b=A,e.updateShadowTexture()},this.getConfig=function(){var t={};return t.imgWH=e.imgWH,t.fotoPosition={x:e._fotoPosition.x,y:e._fotoPosition.y},t.fotoWH=e.fotoWH,t.maxHeight=e.maxHeight,t.isDinamFotoRect=e.isDinamFotoRect,t.arrDataSempl=e.arrDataSempl,t.opacityMat=e.opacityMat,t.dunamic=e.dunamic,t.canvasGG={arrColorStopTranspanent:e.canvasGG.arrColorStopTranspanent,arrProcent:e.canvasGG.arrProcent},t},this.setConfig=function(t){e.canvasGG.arrColorStopTranspanent=t.canvasGG.arrColorStopTranspanent,e.canvasGG.arrProcent=t.canvasGG.arrProcent,e.fotoPosition.x=t.fotoPosition.x,e.fotoPosition.y=t.fotoPosition.y,e.fotoWH=t.fotoWH,e.isDinamFotoRect=t.isDinamFotoRect,e.arrDataSempl=t.arrDataSempl,e.opacityMat=t.opacityMat,e.imgWH=t.imgWH,e.dunamic=t.dunamic,e.updateShadowTexture(),e.maxHeight=t.maxHeight};var R={imgWH:1024,fotoPosition:{x:0,y:0},fotoWH:150,maxHeight:300,isDinamFotoRect:!1,arrDataSempl:[{min:0,max:6,blur:.8,alpha:.25},{min:4,max:15,blur:3,alpha:.64},{min:10,max:23,blur:4,alpha:.5},{min:15,max:50,blur:15,alpha:1},{min:20,max:198.09,blur:15,alpha:.7},{min:0,max:2,blur:1.02,alpha:1}],opacityMat:1,dunamic:!0,canvasGG:{arrColorStopTranspanent:[0,1,.25],arrProcent:[.4,1,.96]}};function T(t,e,i,A,s,n,r,o){return t<s+r&&e<n+o&&t+i>s&&e+A>n}function M(t,e,i,A){return e=null!=e?e:0,i=null!=i?i:100,A=A||100,isNaN(parseFloat(t))&&(t=e),t<e&&(t=e),t>i&&(t=i),t=Math.round(t*A)/A,e<0?100*(Math.abs(e)+t)/(Math.abs(e)+Math.abs(i)||1):100*(Math.abs(e)-t)/(Math.abs(e)-Math.abs(i)||1)}this.sss=R,this.setConfig(R),this.getBase64=function(){return e.render(),u.canvas.toDataURL()},this.debug=!1}function n(t,e,i,A){this.min=t||0,this.max=e||1,this.blur=i||0,this.alpha=A||1}function r(){var t=this,e=document.createElement("canvas");this.canvas=e,e.width=256,e.height=256;var i=e.getContext("2d"),A=new Image;this.b64=null,this._blur=0,this._blur1=1,this._alpha=1,this.image=new Image,this.setBase64=function(i,s){this.b64=i,(A=new Image).onload=function(){e.clearRect(0,0,e.width,e.height),e.width=A.width,e.height=A.height,t.update(),s&&s(e.toDataURL())},A.src=i},this.setCanvas=function(t){A=t,e.width=t.width,e.height=t.height},this.update=function(){i.filter="blur("+t._blur+"px)",i.globalAlpha=t._alpha,i.drawImage(A,0,0)}}function o(){var t=this,e=document.createElement("canvas");e.width=e.height=256,this.canvas=e;var i=e.getContext("2d");this._blur=0,this._alpha=1,this.arrColorStopTranspanent=[0,1],this.arrProcent=[0,1],this.position=new THREE.Vector2,this.position1=new THREE.Vector2(1,0),this.r=0,this.g=0,this.b=0,this.update=function(){var A=e.width,s=e.height;i.clearRect(0,0,A,s),i.rect(0,0,A,s),i.filter="blur("+t._blur+"px)",i.globalAlpha=t._alpha;for(var n=t.position.x*A,r=t.position.y*s,o=t.position1.x*A,a=t.position1.y*s,h=i.createLinearGradient(n,r,o,a),c=0;c<t.arrColorStopTranspanent.length;c++)h.addColorStop(t.arrProcent[c],"rgba("+t.r+","+t.g+","+t.b+","+t.arrColorStopTranspanent[c]+")");i.fillStyle=h,i.fill()},this.update()}function a(t){this.parent=t;this._active=!1,this._visible=!0,this.WH=512,this._wn=this.WH,this._obj3d=void 0,this.smc=void 0,this.init=function(){null==this.smc&&(this.smc=new s,this.smc.fotoPosition.set(-this._wn/2,-this._wn/2),this.smc.fotoWH=this._wn,this.smc.content3d.rotation.x=-Math.PI/2,this.smc.content3d.position.y=-1,this.smc.content3d.visible=this._visible,this.dergObj())},this.dergActiv=function(){1==this._active?null==this.smc.content3d.parent&&this.parent.parent.groupObject.add(this.smc.content3d):null!=this.smc.content3d.parent&&this.parent.parent.groupObject.remove(this.smc.content3d)},this.render=function(){null!=this.smc&&null!=this.smc.content3d.parent&&this.smc.upDate()},this.dergObj=function(){null!=this.smc&&(null!=this._obj3d?this.smc.arrObj[0]==this._obj3d||(this.smc.clear(),this.smc.addObj(this._obj3d)):this.smc.clear())}}Object.defineProperties(s.prototype,{scaleShadow:{set:function(t){this.dirty=!0,this._scaleShadow=t},get:function(){return this._scaleShadow}},debug:{set:function(t){this.helpers.visible=t},get:function(){return this.helpers.visible}},offsetY:{set:function(t){this._offsetY=t,this.dirty=!0},get:function(){return this._offsetY}},maxHeight:{set:function(t){this.dirty=!0,this.boundingBoxUv.max.y=t,this.updateShadowUv()},get:function(){return this.boundingBoxUv.max.y}},dunamic:{set:function(t){this.dirty=!0,this._dunamic=t},get:function(){return this._dunamic}},fotoPosition:{set:function(t){this.dirty=!0,this._fotoPosition=t},get:function(){return this._fotoPosition}},fotoWH:{set:function(t){this.dirty=!0,this._fotoWH=t},get:function(){return this._fotoWH}},imgWH:{set:function(t){this.dirty=!0,this._imgWH=t},get:function(){return this._imgWH}},imgBlur:{set:function(t){this.dirty=!0,this._imgBlur=t},get:function(){return this.dirty=!0,this._imgBlur}},imgAlpha:{set:function(t){this.dirty=!0,this._imgAlpha=t},get:function(){return this._imgAlpha}},isDinamFotoRect:{set:function(t){this.dirty=!0,this._isDinamFotoRect=t},get:function(){return this._isDinamFotoRect}},opacityMat:{set:function(t){this.dirty=!0,this._opacityMat=t,this.matPlan.opacity=this._opacityMat},get:function(){return this._opacityMat}},shadowMaterial:{set:function(t){if(t!==this._shadowMaterial){this._shadowMaterial=t;for(var e=0;e<this.arrShadowMesh.length;e++)if(this.arrShadowMesh[e]instanceof THREE.ShadowMesh)this.arrShadowMesh[e].material=this._shadowMaterial;else for(var i=0;i<this.arrShadowMesh[e].children.length;i++)this.arrShadowMesh[e].children[i]instanceof THREE.ShadowMesh&&(this.arrShadowMesh[e].children[i].material=this._shadowMaterial)}},get:function(){return this._shadowMaterial}},lightPosition4D:{set:function(t){this._lightPosition4D.set(t.x,t.y,t.z,.001)},get:function(){return this._lightPosition4D}}}),Object.defineProperties(r.prototype,{blur:{set:function(t){this._blur=t},get:function(){return this._blur}},alpha:{set:function(t){this._alpha=t},get:function(){return this._alpha}}}),Object.defineProperties(o.prototype,{}),i.d(e,"a",function(){return a}),a.prototype={set active(t){this._active!==t&&(this._active=t,this.init(),this.dergActiv())},get active(){return this._active},set visible(t){this._visible!==t&&(this._visible=t,null!=this.smc&&(this.smc.content3d.visible=t))},get visible(){return this._visible},set obj3d(t){this._obj3d!==t&&(this._obj3d=t,this.dergObj())},get obj3d(){return this._obj3d},set wh(t){this._wh!==t&&(this._wh=t,null!=this.smc&&(this.smc.fotoPosition.set(-this._wn/2,-this._wn/2),this.smc.fotoWH=this._wn))},get wh(){return this._wh}}},function(t,e,i){"use strict";var A=i(0),s=i(2);function n(t){var e=this;this.visi3D=t,this.box3=new THREE.Box3,this.rectScreen=new Rectangle,this.world=new Rectangle(0,0,100,100),this.targetObject=null,this.arrPoint=[],this.isMoveCam=!1,this.isFromGeometry=!1,this._offset=0,this._active=!0,this._debug=!1;var i=new THREE.Vector2,A=new THREE.Vector2,s=new THREE.Vector3;function n(){e.zumeVisi3D(),i.set(e.world.x+e.world.width/2,e.world.y+e.world.height/2),A.set(e.rectScreen.x+e.rectScreen.width/2,e.rectScreen.y+e.rectScreen.height/2),i.sub(A).divideScalar(2)}this.upDate=function(){if(e.active&&(this.updateBound3d(),!e.box3.isEmpty())){if(this.visi3D.xVerh=s.x,this.visi3D.zVerh=s.z,this.visi3D.yVerh=-s.y,e.zumeVisi3D(),e.isMoveCam){n();for(var t=0;i.length()>2&&++t<10;)this.visi3D.position3d.moveCamXY(i),n()}e.debugFocus&&e.debugFocus.upDate()}},this.zumeVisi3D=function(){for(var t,i,A=0,s=6e4,n=0;A<s&&!(++n>20)&&(i=t=(A+s)/2,e.visi3D.zume=i,!(Math.abs(A-t)<.01||Math.abs(s-t)<.01||t<.01));)e.updateRectScreen(),e.isZoomIn()?s=t:A=t+1},this.updateBound3d=function(){if(e.box3.makeEmpty(),e.targetObject)e.box3.copy(e.getCompoundBoundingBox(e.targetObject));else for(var t=0;t<e.arrPoint.length;t++)e.box3.expandByPoint(e.arrPoint[t]);e.box3.getCenter(s)},this.updateRectScreen=function(){if(this.visi3D.camera.updateMatrixWorld(),this.visi3D.scene.updateMatrixWorld(),e.targetObject&&e.isFromGeometry){var t=e.getBoxObject(e.targetObject);e.box3.copy(t.box3),e.box3.getCenter(s),e.setRectFromBox(e.rectScreen,t.box2)}else e.setRectFromBox(e.rectScreen,e.boxToScreen(e.box3));e.updateWorldSize()},this.setRectFromBox=function(t,e){t.x=e.min.x,t.y=e.min.y,t.width=e.max.x-e.min.x,t.height=e.max.y-e.min.y},this.getCompoundBoundingBox=function(){var t=new THREE.Box3,e=new THREE.Box3;function i(i){var A=i.geometry;void 0!==A&&(A.boundingBox||A.computeBoundingBox(),e.copy(A.boundingBox),e.applyMatrix4(i.matrixWorld),t.union(e))}return function(e){return e.updateMatrixWorld(!0),t.makeEmpty(),e.traverseVisible(i),t}}(),this.boxToScreen=function(){for(var t=new THREE.Box2,i=[],A=0;A<8;A++)i[A]=new THREE.Vector3;return function(A){t.makeEmpty(),i[0].set(A.min.x,A.min.y,A.min.z),i[1].set(A.min.x,A.max.y,A.min.z),i[2].set(A.max.x,A.min.y,A.min.z),i[3].set(A.max.x,A.max.y,A.min.z),i[4].set(A.min.x,A.min.y,A.max.z),i[5].set(A.min.x,A.max.y,A.max.z),i[6].set(A.max.x,A.min.y,A.max.z),i[7].set(A.max.x,A.max.y,A.max.z);for(var s=0;s<i.length;s++)t.expandByPoint(e.toScreenXY(i[s]));return t}}(),this.getBoxObject=function(){var t,i,A=new THREE.Box2,s=new THREE.Box3,n={box2:A,box3:s},r=new THREE.Vector3;function o(n){var o=n.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,i=a.length;t<i;t++)r.copy(a[t]).applyMatrix4(n.matrixWorld),s.expandByPoint(r),A.expandByPoint(e.toScreenXY(r))}else if(o.isBufferGeometry){var h=o.attributes.position;if(void 0!==h)for(t=0,i=h.count;t<i;t++)r.fromBufferAttribute(h,t).applyMatrix4(n.matrixWorld),s.expandByPoint(r),A.expandByPoint(e.toScreenXY(r))}}return function(t){return t.updateMatrixWorld(!0),A.makeEmpty(),s.makeEmpty(),t.traverseVisible(o),n}}();var r=new THREE.Vector2,o=new THREE.Vector3;this.toScreenXY=function(t){return o.copy(t),o.project(e.visi3D.camera),r.x=Math.round((o.x+1)*e.visi3D._width/2),r.y=Math.round((1-o.y)*e.visi3D._height/2),r},this.updateWorldSize=function(){e.world.x=e.offset,e.world.y=e.offset,e.world.width=this.visi3D._width-2*e.offset,e.world.height=this.visi3D._height-2*e.offset},this.isZoomIn=function(){return e.rectScreen.x>e.world.x&&e.rectScreen.x+e.rectScreen.width<e.world.x+e.world.width&&e.rectScreen.y>e.world.y&&e.rectScreen.y+e.rectScreen.height<e.world.y+e.world.height}}function r(t){var e=this;this.mFocus=t;var i=visi3D.scene,A=main.stage,s=new BoxHelper(1,materialAlphaRed);i.add(s);var n=new PIXI.Graphics;n.hitArea=new PIXI.Rectangle(0,0,0,0),A.addChild(n),e.active=!1,s.visible=n.visible=e.active,this.upDate=function(){s.visible=n.visible=e.active,e.active&&(n.clear(),n.position.set(visi3D._x,visi3D._y),n.lineStyle(1,0,1),n.drawRect(t.world.x,t.world.y,t.world.width,t.world.height),n.lineStyle(1,16711680,1),n.drawRect(t.rectScreen.x,t.rectScreen.y,t.rectScreen.width,t.rectScreen.height),s.width=t.box3.max.x-t.box3.min.x,s.depth=t.box3.max.y-t.box3.min.y,s.height=t.box3.max.z-t.box3.min.z,t.box3.getCenter(s.position))}}function o(t){var e=this;this.parent=t,this._debug=!1,this.debugInit=!1,this.shadowHelper=void 0,this.spotLightHelper=void 0,this.gridHelper=void 0,this.FIXATION=!1,this.ROTATION_X=0,this.ROTATION_Z=0,this.DISTANCE=this.parent.DISTANCE,this.CUB_HEIGHT=this.parent.CUB_HEIGHT,this.CUB_WIDTH=this.parent.CUB_WIDTH,this.SKY_X=0,this.SKY_Y=0,this.SKY_Z=0,this._fixation=this.FIXATION,this._rotationX=this.ROTATION_X,this._rotationZ=this.ROTATION_Z,this._distance=this.DISTANCE,this._cubHeight=this.CUB_HEIGHT,this._cubWidth=this.CUB_WIDTH,this.sky=new A.a(this),this.smc=new s.a(this),this.focus=new n(this.parent),this.funDebug=function(){1!=this.debugInit&&(this.debugInit=!0,this.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(1e3,1e3).rotateX(-Math.PI),new THREE.MeshLambertMaterial({color:new THREE.Color(11316396)})),this.plane.castShadow=this.plane.receiveShadow=!0,this.gridHelper=new THREE.GridHelper(1e3,10),this.gridHelper.rotation.x=-Math.PI/2,this.shadowHelper=new THREE.CameraHelper(this.parent.sunLight.shadow.camera),this.parent.sunLight&&(this.spotLightHelper=new THREE.DirectionalLightHelper(this.parent.sunLight))),1==this._debug?(null==this.gridHelper.parent&&this.parent.groupObject.add(this.gridHelper),null==this.plane.parent&&this.parent.groupObject.add(this.plane),null==this.shadowHelper.parent&&this.parent.scene.add(this.shadowHelper),this.parent.sunLight&&(null!=this.parent.sunLight.parent||(null!=this.spotLightHelper.parent&&this.parent.scene.remove(this.spotLightHelper),null!=this.shadowHelper.parent&&this.parent.scene.remove(this.shadowHelper)))):(null!=this.gridHelper.parent&&this.parent.groupObject.remove(this.gridHelper),null!=this.plane.parent&&this.parent.groupObject.remove(this.plane),null!=this.shadowHelper.parent&&this.parent.scene.remove(this.shadowHelper),this.parent.sunLight&&null!=this.spotLightHelper.parent&&this.parent.scene.remove(this.spotLightHelper))},this.render=function(){1==this._debug&&null!=this.spotLightHelper&&this.spotLightHelper.update(),this.smc.render(),this.sky.render(),this.focus.upDate(),this.dragSunLight()};var i=0;this.dragSunLight=function(){var t;null!=this.parent.sunLight&&(null!=this.parent.sunLight.parent&&(!0===e._fixation?(i=this._distance+2*this._cubHeight,e.parent.sunLight.position.set(0,i,0),e.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(1,0,0),e._rotationX),e.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(0,1,0),e._rotationZ-e.parent._rotationZ)):(i=this._distance+this._cubHeight,this.parent.sunLight.position.set(0,i,0),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(1,0,0),this._rotationX),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(0,1,0),this._rotationZ),this.parent.staticShadow&&(t=new THREE.Vector3(e.parent.xVerh,e.parent.yVerh,e.parent.zVerh),e.parent.sunLight.position.add(t),e.parent.sunLight.target.position.copy(t),r.distanceTo(t)>e.distanceUpdateShadow&&(r.copy(t),e.parent.shadowNeedsUpdate=!0)))))};var r=new THREE.Vector3;this.distanceUpdateShadow=500,this.dragSunLight2=function(){null!=this.parent.sunLight&&null!=this.parent.sunLight.parent&&(!0===this._fixation||(i=this._distance+2*this._cubHeight,this.parent.sunLight.position.set(0,i,0),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(1,0,0),this._rotationX),this.parent.sunLight.position.applyAxisAngle(new THREE.Vector3(0,1,0),this._rotationZ)))},this.dragSunLight3=function(){this.parent.sunLight&&(this.parent.sunLight.shadow.camera.near=0+this._cubHeight,this.parent.sunLight.shadow.camera.far=2*this._cubHeight+this._cubHeight,this.parent.sunLight.shadow.camera.updateProjectionMatrix(),this.shadowHelper&&this.shadowHelper.update())},this.sunActiv=function(t){this.parent.objShadow(this.parent.group,t),1==t?null==this.parent.sunLight.parent&&(this.parent.scene.add(this.parent.sunLight),this.parent.scene.add(e.parent.sunLight.target)):null!=this.parent.sunLight.parent&&(this.parent.scene.remove(this.parent.sunLight),this.parent.scene.remove(e.parent.sunLight.target)),this.funDebug()},this.ambientActiv=function(t){1==t?null==this.parent.ambientLight.parent&&this.parent.scene.add(this.parent.ambientLight):null!=this.parent.ambientLight.parent&&this.parent.scene.remove(this.parent.ambientLight)}}n.prototype={set offset(t){this._offset=t||0},get offset(){return this._offset},set debug(t){this._debug=t,t&&!this.debugFocus&&(this.debugFocus=new r(this)),this.debugFocus&&(this.debugFocus.active=t)},get debug(){return this._debug},set active(t){this._active=t,t||(this.debug=!1)},get active(){return this._active}},i.d(e,"a",function(){return o}),o.prototype={set debug(t){this._debug!==t&&(this._debug=t,this.funDebug())},get debug(){return this._debug},set rotationX(t){this._rotationX!==t&&(this._rotationX=t,null!=this.spotLightHelper&&(this.parent.sunLight.shadow.camera.updateProjectionMatrix(),this.spotLightHelper.update()),this.dragSunLight2())},get rotationX(){return this._rotationX},set rotationZ(t){this._rotationZ!==t&&(this._rotationZ=t,this.sky.shadRotZ=t,null!=this.spotLightHelper&&this.spotLightHelper.update(),this.dragSunLight2())},get rotationZ(){return this._rotationZ},set fixation(t){this._fixation!==t&&(this._fixation=t,this.dragSunLight2())},get fixation(){return this._fixation},set distance(t){this._distance!==t&&(this._distance=t,this.dragSunLight3(),this.dragSunLight2())},get distance(){return this._distance},set cubHeight(t){this._cubHeight!==t&&(this._cubHeight=t,this.dragSunLight3(),this.dragSunLight2())},get cubHeight(){return this._cubHeight},set cubWidth(t){this._cubWidth!==t&&(this._cubWidth=t,this.parent.sunLight&&(this.parent.sunLight.shadow.camera.right=this._cubWidth,this.parent.sunLight.shadow.camera.left=-this._cubWidth,this.parent.sunLight.shadow.camera.top=this._cubWidth,this.parent.sunLight.shadow.camera.bottom=-this._cubWidth,this.parent.sunLight.shadow.camera.updateProjectionMatrix(),this.shadowHelper&&this.shadowHelper.update()))},get cubWidth(){return this._cubWidth}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MVisi3D});var _MEffectArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_MPosition3d_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_MEvent3DArr_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_MUtility_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3);function MVisi3D(_contentHTML,_content2d,_devas,_directional,_efect,_event3DArr,_alpha){var self=this;_devas=void 0!==_devas&&_devas,_directional=void 0===_directional||_directional,_efect=void 0===_efect||_efect,_event3DArr=void 0===_event3DArr||_event3DArr,_alpha=void 0!==_alpha&&_alpha,this.intRend=0,this.devas=_devas,this.arrSetiScene=[],this._xVerh=0,this._yVerh=0,this._zVerh=0,this._rotationX=0,this._rotationZ=0,this._zume=1e3,this._arrOut=[],this._x=0,this._y=0,this._height=100,this._width=100,this.yes3d=!0,this.intRendOk=1,this._visible=!0,this._isDragPan=!1,this._activMouse=!0,this._staticShadow=!1,this.alwaysRender=!1,this.AMBIEN_COLOR="#ffffff",this.AMBIEN_INTENSITY=.79,this.LIGHT_COLOR="#ffffff",this.LIGHT_BIAS=.001,this.SHADOW_INTENSITY=.22,this.SHADOW_RADIUS=1,this.SHADOW_WH=4096,this.DISTANCE=0,this.CUB_HEIGHT=500,this.CUB_WIDTH=500,this.FOV=45,this.FAR=45e3,this.content=void 0,this.graphics=void 0,null!=_content2d&&(this.content=eval("new PIXI.Container()"),this.graphics=eval("new PIXI.Graphics()"),_content2d.addChild(this.content),this.content.addChild(this.graphics),this.graphics.interactive=!0),this.camera,this.scene=new THREE.Scene;var color=7978188;this.camera=new THREE.PerspectiveCamera(this.FOV,this._width/this._height,1,this.FAR),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:_alpha}),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this._width,this._height),1==_alpha?this.renderer.setClearColor(color,0):this.renderer.setClearColor(color,1),this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.efect,1==_efect&&(this.efect=new _MEffectArray_js__WEBPACK_IMPORTED_MODULE_0__.a(this,["RenderPass","OutlinePass","ShaderPass"]),this.efect.init()),_contentHTML.appendChild(this.renderer.domElement),this.event3DArr,1==_event3DArr&&(this.event3DArr=new _MEvent3DArr_js__WEBPACK_IMPORTED_MODULE_2__.a(this,this.camera,this.renderer.domElement),this.scene.event3DArr=this.event3DArr,this.event3DArr.addDragEvent(this.graphics,this.renderer.domElement),this.event3DArr.activ=this._activMouse),this.camera.position.set(0,0,-60),this.camera.rotation.set(Math.PI,0,0),this.renderer.domElement.style.position="fixed",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.group=new THREE.Object3D,this.group.rotation.x=Math.PI/2,this.scene.add(this.group),this.group1=new THREE.Object3D,this.group.add(this.group1),this.group2=new THREE.Object3D,this.group1.add(this.group2),this.groupObject=new THREE.Object3D,this.group2.add(this.groupObject),this.group3d=new THREE.Object3D,this.groupObject.add(this.group3d),this.gCGG=new THREE.Object3D,this.group.add(this.gCGG),this.gCAngel=new THREE.Object3D,this.gCGG.add(this.gCAngel),this.gCam1=new THREE.Object3D,this.gCAngel.add(this.gCam1),this.gCam2=new THREE.Object3D,this.gCam1.add(this.gCam2),this.ggCam=new THREE.Object3D,this.gCam2.add(this.ggCam),this.ggCam.add(this.camera),this.ggCam.position.z=-this._zume,this.camera.position.z=0,this.axesHelper=new THREE.AxesHelper(100),this.scene.add(this.axesHelper),this.axesHelper.visible=!1,this.arrPoint=[];var disLig=4e3,powerLig=.4,dis=1e4,bbbbbb;if(this.sunLight,this.ambientLight=new THREE.AmbientLight(this.AMBIEN_COLOR,this.AMBIEN_INTENSITY),this.scene.add(this.ambientLight),this.ambientLight.castShadow=!1,1==_directional){var sunIntensity=this.SHADOW_INTENSITY;this.sunLight=new THREE.DirectionalLight(this.LIGHT_COLOR,sunIntensity,0,0,.2),this.sunLight.position.set(0,this.DISTANCE+2*this.CUB_HEIGHT,0),this.sunLight.castShadow=!0,this.sunLight.shadow.camera.near=this.CUB_HEIGHT,this.sunLight.shadow.camera.far=this.CUB_HEIGHT+2*this.CUB_HEIGHT,this.sunLight.shadow.camera.right=this.CUB_WIDTH,this.sunLight.shadow.camera.left=-this.CUB_WIDTH,this.sunLight.shadow.camera.top=this.CUB_WIDTH,this.sunLight.shadow.camera.bottom=-this.CUB_WIDTH,this.sunLight.shadow.mapSize.width=this.SHADOW_WH,this.sunLight.shadow.mapSize.height=this.SHADOW_WH,this.sunLight.shadow.bias=this.LIGHT_BIAS,this.sunLight.shadow.radius=this.SHADOW_RADIUS}this.initOut=function(){},this.position3d=new _MPosition3d_js__WEBPACK_IMPORTED_MODULE_1__.a(self,this.graphics,this.renderer.domElement),this.utility=new _MUtility_js__WEBPACK_IMPORTED_MODULE_3__.a(self),this.arrayDoRender=[],this.arrayDoRender2=[],this.shadowNeedsUpdate=!1,this.render=function(){if(0!=this.yes3d){if(0!=this.arrayDoRender2.length)for(var t=0;t<this.arrayDoRender2.length;t++)this.arrayDoRender2[t]();if(this.utility.render(),this.intRend=10,this.shadowNeedsUpdate&&(this.shadowNeedsUpdate=!1,this.renderer.shadowMap.needsUpdate=!0),this.efect?0==this.efect.render()&&this.renderer.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera),0!=this.arrayDoRender.length)for(t=0;t<this.arrayDoRender.length;t++)this.arrayDoRender[t]()}},this.upDate=function(){(this.alwaysRender||this.intRend==this.intRendOk)&&this.render(),this.intRend<10&&this.intRend++},this.renderer.render(this.scene,this.camera),this.sizeWindow=function(t,e,i,A){null!=t&&(this._x=t),null!=e&&(this._y=e),null!=A&&(this._height=A),null!=i&&(this._width=i),null!=this.content&&(this.content.x=this._x,this.content.y=this._y,this.graphics.clear(),this.graphics.beginFill(16711680,0),this.graphics.drawRect(0,0,this._width,this._height),this.graphics.endFill()),this.renderer.domElement.style.left=this._x+"px",this.renderer.domElement.style.top=this._y+"px",this.camera.aspect=this._width/this._height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this._width,this._height),this.intRend=1,this.event3DArr&&(this.event3DArr.sizeWindow(this._width,this._height),this.event3DArr.setRect(this._x,this._y,this._width,this._height)),this.efect&&this.efect.sizeWindow(this._width,this._height)},this.render(),this.sizeWindow(),this.objShadow=function(t,e){if(1!=this.devas){if(null==e&&(e=!0),bbbbbb=!0,t.material&&1==t.material.transparent&&t.material.opacity<1&&(bbbbbb=!1),1==bbbbbb&&(t.castShadow=e,t.receiveShadow=e),null!=t.children)for(var i=0;i<t.children.length;i++)null!=t.children?this.objShadow(t.children[i],e):(bbbbbb=!0,t.children[i].material&&1==t.material.transparent&&t.material.opacity<1&&(bbbbbb=!1),1==bbbbbb&&(t.children[i].castShadow=e,t.children[i].receiveShadow=e))}else e=!1},this.addEvent=function(t,e){this.event3DArr&&this.event3DArr.eventSob.addEvent(t,e)},this.removeEvent=function(t,e){this.event3DArr&&this.event3DArr.eventSob.removeEvent(t,e)},this.addChildMouse=function(t){this.event3DArr&&this.event3DArr.addChild(t)},this.removeChildMouse=function(t){this.event3DArr&&this.event3DArr.removeChild(t)},this.fun_rotationX,this.fun_rotationZ}MVisi3D.prototype={set staticShadow(t){this.renderer.shadowMap.autoUpdate=!t,this._staticShadow=t},get staticShadow(){return this._staticShadow},set rotationX(t){this._rotationX!==t&&(this._rotationX=t,this.intRend=1,this.gCam2.rotation.x=t,this.fun_rotationX&&this.fun_rotationX())},get rotationX(){return this._rotationX},set rotationZ(t){this._rotationZ!==t&&(this._rotationZ=t,this.gCam1.rotation.z=t,this.intRend=1,this.fun_rotationZ&&this.fun_rotationZ())},get rotationZ(){return this._rotationZ},set zume(t){this._zume!==t&&(this._zume=t,this.ggCam.position.z=-t,this.camera.position.z=0,this.intRend=1)},get zume(){return this._zume},set yVerh(t){this._yVerh=t,this.gCGG.position.z=t,this.intRend=1},get yVerh(){return this.gCGG.position.z},set xVerh(t){this._xVerh=t,this.gCGG.position.x=t,this.intRend=1},get xVerh(){return this.gCGG.position.x},set zVerh(t){this._zVerh=t,this.gCGG.position.y=t,this.intRend=1},get zVerh(){return this.gCGG.position.y},set arrOut(t){this._arrOut=t,this.efect.setValue("outline",null,this._arrOut),this.intRend=1},get arrOut(){return this._arrOut},set x(t){this._x=t,this.sizeWindow()},get x(){return this._x},set y(t){this._y=t,this.sizeWindow()},get y(){return this._y},set height(t){this._height=t,this.sizeWindow()},get height(){return this._height},set width(t){this._width=t,this.sizeWindow()},get width(){return this._width},set visible(t){this._visible=t,this.content.visible=t,this.renderer.domElement.style.visibility=t?"visible":"hidden"},get visible(){return this._visible},set isDragPan(t){this._isDragPan=t,this.position3d.isDragPan=t},get isDragPan(){return this._isDragPan},set activMouse(t){this._activMouse=t,this.event3DArr&&(this.event3DArr.activ=this._activMouse)},get activMouse(){return this._activMouse},set minZum(t){this.position3d.minZum=t},get minZum(){return this.position3d.minZum},set maxZum(t){this.position3d.maxZum=t},get maxZum(){return this.position3d.maxZum},set maxRotationX(t){this.position3d.minMaxX.x=t},get maxRotationX(){return this.position3d.minMaxX.x},set minRotationX(t){t<this.rotationX&&(this.rotationX=t),this.position3d.minMaxX.y=t},get minRotationX(){return this.position3d.minMaxX.y}}},function(t,e,i){"use strict";function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var i=this;this.visi3D=t,this._startArray=[],this._width=t._width,this._height=t._height,this.scene=this.visi3D.scene,this.camera=this.visi3D.camera,this.renderer=this.visi3D.renderer,this.composer=new THREE.EffectComposer(this.renderer),this.RENDER_PASS=!1,this.OUTLINE_PASS=!1,this.OUTLINE_COLOR="#0000ff",this.OUTLINE_COLOR1="#ff0000",this.STRJSON='{"edgeGlow":0,"usePatternTexture":false,"edgeThickness":1,"edgeStrength":3,"downSampleRatio":2,"pulsePeriod":0}',this.SAOJSON='{"saoBlur":true,"output":0,"saoBias":0,"saoBlurDepthCutoff":0,"saoBlurRadius":8,"saoBlurStdDev":4,"saoIntensity":0.18,"saoKernelRadius":100,"saoMinResolution":0,"saoScale":11.58}',this.TAA_PASS=!1,this.SAMPLE_LEVEL=0,this.STEREO_PASS=!1,this.SHADER_PASS=!1,this.SAO_PASS=!1,this.SSAO_PASS=!1,this._renderPass=this.RENDER_PASS,this._outlinePass=this.OUTLINE_PASS,this._outlineColor=this.OUTLINE_COLOR,this._outlineColor1=this.OUTLINE_COLOR1,this._strJSON=this.STRJSON,this._taaPass=this.TAA_PASS,this._sampleLevel=this.SAMPLE_LEVEL,this._stereoPass=this.STEREO_PASS,this._shaderPass=this.SHADER_PASS,this._saoPass=this.SAO_PASS,this._saoJSON=this.SAOJSON,this.jsonCheck=function(t){if(null==t)return!1;if("string"!=typeof t)return!1;if(-1==t.indexOf('":'))return!1;if(-1==t.indexOf("}"))return!1;if("null"===t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0},this.setObjInObj=function(t,e){if(0!=this.jsonCheck(e)){var i=JSON.parse(e);for(var s in i)for(var n in t)n==s&&("object"==A(i[n])?this.setObjInObj(t[n],i[n]):t[n]=i[n])}},this.array=[],this.object={},this.init=function(){if(0==this.array.length){var t=0;this.array[t]=new n(new THREE.RenderPass(this.scene,this.camera)),this.array[t].type="RenderPass",t++,this.array[t]=new n(new THREE.OutlinePass(new THREE.Vector2(this._width,this._height),this.scene,this.camera)),this.array[t].type="OutlinePass",this.array[t].effect.visibleEdgeColor=new THREE.Color(this._outlineColor),this.array[t].effect.hiddenEdgeColor=new THREE.Color(this._outlineColor1),t++,this.array[t]=new n(new THREE.TAARenderPass(this.scene,this.camera)),this.array[t].type="TAARenderPass",t++,this.array[t]=new n(new THREE.ShaderPass(THREE.FXAAShader)),this.array[t].type="ShaderPass",this.array[t].effect.uniforms.resolution.value.set(1/this._width,1/this._height),this.array[t].sizeWindow=function(t,e){this.effect.uniforms.resolution.value.set(1/t,1/e)},t++;var i=this.camera.far,A=this.camera.near;this.camera.far=10,this.camera.near=3,this.array[t]=new n(new THREE.SAOPass(this.scene,this.camera,!0,!0)),this.array[t].type="SAOPass",this.camera.far=i,this.camera.near=A,t++;for(var s=0;s<this.array.length;s++)this.object[this.array[s].type]=this.array[s];this.setObjInObj(this.object.SAOPass.effect.params,this._saoJSON),this.setObjInObj(this.object.OutlinePass.effect,this._strJSON),this.sizeWindow(this._width,this._height),this.startArray=e}};var s=[];this.setValue=function(t,e,i){if("outline"==t&&1==this.object.OutlinePass.activ){if(1==Array.isArray(i))return void(this.object.OutlinePass.effect.selectedObjects=i);if(null==i&&null==i)return void(this.object.OutlinePass.effect.selectedObjects=s);this.object.OutlinePass.effect.selectedObjects=[i]}},this.drawRender=function(){this.clear(),1==this._renderPass&&(this.object.RenderPass.activ=!0,this.clear(!0),this.object.RenderPass.effect.renderToScreen=!0,this.composer.addPass(this.object.RenderPass.effect)),1==this._outlinePass&&(this.object.OutlinePass.activ=!0,this.composer.addPass(this.object.OutlinePass.effect)),1==this._taaPass&&(this.object.TAARenderPass.activ=!0,this.clear(!0),this.object.TAARenderPass.effect.renderToScreen=!0,this.composer.addPass(this.object.TAARenderPass.effect)),1==this._shaderPass&&(this.object.ShaderPass.activ=!0,this.clear(!0),this.object.ShaderPass.effect.renderToScreen=!0,this.composer.addPass(this.object.ShaderPass.effect)),1==this._saoPass&&(this.object.SAOPass.activ=!0,this.clear(!0),this.object.SAOPass.effect.renderToScreen=!0,this.composer.addPass(this.object.SAOPass.effect)),1==this._ssaoPass&&(this.object.SSAOPass.activ=!0,this.clear(!0),this.object.SSAOPass.effect.renderToScreen=!0,this.composer.addPass(this.object.SSAOPass.effect))},this.redrag=function(){for(var t=[],e=1;e<i.array.length;e++)1==i.array[e].activ&&t.push(i.array[e].type);this.startArray=t},this.setArrayMash=function(t,e){};var r=!0;this.render=function(){if(r=!1,0!=this.array.length){for(var t=0;t<this.array.length;t++)0!=this.array[t]._activ&&(this.array[t].render(),r=!0);return 1==r&&this.composer.render(),r}},this.sizeWindow=function(t,e){if(this._width=t,this._height=e,0!=this.array.length){this.composer.setSize(this._width,this._height);for(var i=0;i<this.array.length;i++)this.array[i].sizeWindow&&this.array[i].sizeWindow(t,e)}},this.clear=function(t){null==t&&(this.composer.passes.length=0);for(var e=0;e<this.array.length;e++)null==t&&(this.array[e].activ=!1),this.array[e].effect.renderToScreen=!1,this.array[e].effect.unbiased=!1}}function n(t){this.type="null",this.effect=t,this._activ=!1,this.render=function(){}}i.d(e,"a",function(){return s}),s.prototype={set activ(t){this._activ!=t&&(this._activ=t)},get activ(){return this._activ},set startArray(t){this._startArray=t},get startArray(){return this._startArray},set renderPass(t){this._renderPass!=t&&(this._renderPass=t,this.drawRender())},get renderPass(){return this._renderPass},set outlinePass(t){this._outlinePass!=t&&(this._outlinePass=t,this.drawRender())},get outlinePass(){return this._outlinePass},set outlineColor(t){this._outlineColor!=t&&(this._outlineColor=t,this.object.OutlinePass.effect.visibleEdgeColor=new THREE.Color(this._outlineColor))},get outlineColor(){return this._outlineColor},set outlineColor1(t){this._outlineColor1!=t&&(this._outlineColor1=t,this.object.OutlinePass.effect.hiddenEdgeColor=new THREE.Color(this._outlineColor1))},get outlineColor1(){return this._outlineColor1},set strJSON(t){this._strJSON!=t&&(this._strJSON=t,this.setObjInObj(this.object.OutlinePass.effect,this._strJSON))},get strJSON(){return this._strJSON},set taaPass(t){this._taaPass!=t&&(this._taaPass=t,this.drawRender())},get taaPass(){return this._taaPass},set sampleLevel(t){this._sampleLevel!=t&&(this._sampleLevel=t,this.object.TAARenderPass.effect.sampleLevel=this._sampleLevel)},get sampleLevel(){return this._sampleLevel},set shaderPass(t){this._shaderPass!=t&&(this._shaderPass=t,this.drawRender())},get shaderPass(){return this._shaderPass},set saoPass(t){this._saoPass!=t&&(this._saoPass=t,this.drawRender())},get saoPass(){return this._saoPass},set saoJSON(t){this._saoJSON!=t&&(this._saoJSON=t,this.setObjInObj(this.object.SAOPass.effect.params,this._saoJSON))},get saoJSON(){return this._saoJSON}},n.prototype={set activ(t){this._activ!=t&&(this._activ=t)},get activ(){return this._activ}},THREE.StereoEffect=function(t){var e=new THREE.StereoCamera;e.aspect=.5,this.setSize=function(e,i){t.setSize(e,i)},this.render=function(i,A){i.updateMatrixWorld(),null===A.parent&&A.updateMatrixWorld(),e.update(A);var s=t.getSize();t.setScissorTest(!0),t.clear(),t.setScissor(0,0,s.width/2,s.height),t.setViewport(0,0,s.width/2,s.height),t.render(i,e.cameraL),t.setScissor(s.width/2,0,s.width/2,s.height),t.setViewport(s.width/2,0,s.width/2,s.height),t.render(i,e.cameraR),t.setScissorTest(!1)}},THREE.PeppersGhostEffect=function(t){var e,i,A,s=this;s.cameraDistance=15,s.reflectFromAbove=!1;var n=new THREE.PerspectiveCamera,r=new THREE.PerspectiveCamera,o=new THREE.PerspectiveCamera,a=new THREE.PerspectiveCamera,h=new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3;t.autoClear=!1,this.setSize=function(s,n){e=s/2,s<n?(i=s/3,A=s/3):(i=n/3,A=n/3),t.setSize(s,n)},this.render=function(l,u){l.updateMatrixWorld(),null===u.parent&&u.updateMatrixWorld(),u.matrixWorld.decompose(h,c,d),n.position.copy(h),n.quaternion.copy(c),n.translateZ(s.cameraDistance),n.lookAt(l.position),r.position.copy(h),r.quaternion.copy(c),r.translateZ(-s.cameraDistance),r.lookAt(l.position),r.rotation.z+=Math.PI/180*180,o.position.copy(h),o.quaternion.copy(c),o.translateX(-s.cameraDistance),o.lookAt(l.position),o.rotation.x+=Math.PI/180*90,a.position.copy(h),a.quaternion.copy(c),a.translateX(s.cameraDistance),a.lookAt(l.position),a.rotation.x+=Math.PI/180*90,t.clear(),t.setScissorTest(!0),t.setScissor(e-i/2,2*A,i,A),t.setViewport(e-i/2,2*A,i,A),s.reflectFromAbove?t.render(l,r):t.render(l,n),t.setScissor(e-i/2,0,i,A),t.setViewport(e-i/2,0,i,A),s.reflectFromAbove?t.render(l,n):t.render(l,r),t.setScissor(e-i/2-i,A,i,A),t.setViewport(e-i/2-i,A,i,A),s.reflectFromAbove?t.render(l,a):t.render(l,o),t.setScissor(e+i/2,A,i,A),t.setViewport(e+i/2,A,i,A),s.reflectFromAbove?t.render(l,o):t.render(l,a),t.setScissorTest(!1)}},THREE.ParallaxBarrierEffect=function(t){var e=new THREE.OrthographicCamera(-1,1,1,-1,0,1),i=new THREE.Scene,A=new THREE.StereoCamera,s={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat},n=new THREE.WebGLRenderTarget(512,512,s),r=new THREE.WebGLRenderTarget(512,512,s),o=new THREE.ShaderMaterial({uniforms:{mapLeft:{type:"t",value:n.texture},mapRight:{type:"t",value:r.texture}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = vec2( uv.x, uv.y );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","varying vec2 vUv;","void main() {","\tvec2 uv = vUv;","\tif ( ( mod( gl_FragCoord.y, 2.0 ) ) > 1.00 ) {","\t\tgl_FragColor = texture2D( mapLeft, uv );","\t} else {","\t\tgl_FragColor = texture2D( mapRight, uv );","\t}","}"].join("\n")}),a=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),o);i.add(a),this.setSize=function(e,i){t.setSize(e,i);var A=t.getPixelRatio();n.setSize(e*A,i*A),r.setSize(e*A,i*A)},this.render=function(s,o){s.updateMatrixWorld(),null===o.parent&&o.updateMatrixWorld(),A.update(o),t.render(s,A.cameraL,n,!0),t.render(s,A.cameraR,r,!0),t.render(i,e)}},THREE.AnaglyphEffect=function(t,e,i){this.colorMatrixLeft=(new THREE.Matrix3).fromArray([1.0671679973602295,-.0016435992438346148,.0001777536963345483,-.028107794001698494,-.00019593400065787137,-.0002875397040043026,-.04279090091586113,15809757314855233e-21,-.00024287120322696865]),this.colorMatrixRight=(new THREE.Matrix3).fromArray([-.0355340838432312,-.06440307199954987,.018319187685847282,-.10269022732973099,.8079727292060852,-.04835830628871918,.0001224992738571018,-.009558862075209618,.567823588848114]);var A=new THREE.OrthographicCamera(-1,1,1,-1,0,1),s=new THREE.Scene,n=new THREE.StereoCamera,r={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat};void 0===e&&(e=512),void 0===i&&(i=512);var o=new THREE.WebGLRenderTarget(e,i,r),a=new THREE.WebGLRenderTarget(e,i,r),h=new THREE.ShaderMaterial({uniforms:{mapLeft:{type:"t",value:o.texture},mapRight:{type:"t",value:a.texture},colorMatrixLeft:{type:"m3",value:this.colorMatrixLeft},colorMatrixRight:{type:"m3",value:this.colorMatrixRight}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = vec2( uv.x, uv.y );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","varying vec2 vUv;","uniform mat3 colorMatrixLeft;","uniform mat3 colorMatrixRight;","float lin( float c ) {","\treturn c <= 0.04045 ? c * 0.0773993808 :","\t\t\tpow( c * 0.9478672986 + 0.0521327014, 2.4 );","}","vec4 lin( vec4 c ) {","\treturn vec4( lin( c.r ), lin( c.g ), lin( c.b ), c.a );","}","float dev( float c ) {","\treturn c <= 0.0031308 ? c * 12.92","\t\t\t: pow( c, 0.41666 ) * 1.055 - 0.055;","}","void main() {","\tvec2 uv = vUv;","\tvec4 colorL = lin( texture2D( mapLeft, uv ) );","\tvec4 colorR = lin( texture2D( mapRight, uv ) );","\tvec3 color = clamp(","\t\t\tcolorMatrixLeft * colorL.rgb +","\t\t\tcolorMatrixRight * colorR.rgb, 0., 1. );","\tgl_FragColor = vec4(","\t\t\tdev( color.r ), dev( color.g ), dev( color.b ),","\t\t\tmax( colorL.a, colorR.a ) );","}"].join("\n")}),c=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),h);s.add(c),this.setSize=function(e,i){t.setSize(e,i);var A=t.getPixelRatio();o.setSize(e*A,i*A),a.setSize(e*A,i*A)},this.render=function(e,i){e.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),n.update(i),t.render(e,n.cameraL,o,!0),t.render(e,n.cameraR,a,!0),t.render(s,A)},this.dispose=function(){o&&o.dispose(),a&&a.dispose()}},THREE.AsciiEffect=function(t,e,i){e=void 0===e?" .:-=+*#%@":e,i||(i={});var A,s,n=i.resolution?i.resolution:.15,r=i.scale?i.scale:1,o=!!i.color&&i.color,a=!!i.alpha&&i.alpha,h=!!i.block&&i.block,c=!!i.invert&&i.invert,d=document.createElement("div");d.style.cursor="default";var l,u,g,p=document.createElement("table");d.appendChild(p),this.setSize=function(e,i){A=e,s=i,t.setSize(e,i),function(){l=Math.round(A*b),u=Math.round(s*b),I.width=l,I.height=u,(g=t.domElement).style.backgroundColor&&(p.rows[0].cells[0].style.backgroundColor=g.style.backgroundColor,p.rows[0].cells[0].style.color=g.style.color);p.cellSpacing=0,p.cellPadding=0;var e=p.style;e.display="inline",e.width=Math.round(l/b*r)+"px",e.height=Math.round(u/b*r)+"px",e.whiteSpace="pre",e.margin="0px",e.padding="0px",e.letterSpacing=D+"px",e.fontFamily=v,e.fontSize=y+"px",e.lineHeight=x+"px",e.textAlign="left",e.textDecoration="none"}()},this.render=function(e,i){t.render(e,i),function(t,e){E.clearRect(0,0,l,u),E.drawImage(C,0,0,l,u);for(var i=E.getImageData(0,0,l,u).data,A="",s=0;s<u;s+=2){for(var n=0;n<l;n++){var r,d,g=4*(s*l+n),p=i[g],f=i[g+1],m=i[g+2],v=i[g+3];d=(.3*p+.59*f+.11*m)/255,0==v&&(d=1),r=Math.floor((1-d)*(w.length-1)),c&&(r=w.length-r-1);var I=w[r];void 0!==I&&" "!=I||(I="&nbsp;"),A+=o?"<span style='color:rgb("+p+","+f+","+m+");"+(h?"background-color:rgb("+p+","+f+","+m+");":"")+(a?"opacity:"+v/255+";":"")+"'>"+I+"</span>":I}A+="<br/>"}e.innerHTML="<tr><td>"+A+"</td></tr>"}(0,p)},this.domElement=d;var f=" .,:;i1tfLCG08@".split(""),m=" CGO08@".split(""),v="courier new, monospace",C=t.domElement,I=document.createElement("canvas");if(I.getContext){var E=I.getContext("2d");if(E.getImageData){var w=o?m:f;e&&(w=e);var b=.5;b=.25,n&&(b=n);var y=2/b*r,x=2/b*r,D=0;switch(r){case 1:D=-1;break;case 2:case 3:D=-2.1;break;case 4:D=-3.1;break;case 5:D=-4.15}0}}},THREE.SSAARenderPass=function(t,e,i,A){THREE.Pass.call(this),this.scene=t,this.camera=e,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==i?i:0,this.clearAlpha=void 0!==A?A:0,void 0===THREE.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader");var s=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(s.uniforms),this.copyMaterial=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.camera2=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new THREE.Scene,this.quad2=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},THREE.SSAARenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(t,e){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(t,e)},render:function(t,e,i){this.sampleRenderTarget||(this.sampleRenderTarget=new THREE.WebGLRenderTarget(i.width,i.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var A=THREE.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],s=t.autoClear;t.autoClear=!1;var n=t.getClearColor().getHex(),r=t.getClearAlpha(),o=1/A.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var a=i.width,h=i.height,c=0;c<A.length;c++){var d=A[c];this.camera.setViewOffset&&this.camera.setViewOffset(a,h,.0625*d[0],.0625*d[1],a,h);var l=o;if(this.unbiased)l+=1/32*((c+.5)/A.length-.5);this.copyUniforms.opacity.value=l,t.setClearColor(this.clearColor,this.clearAlpha),t.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===c&&t.setClearColor(0,0),t.render(this.scene2,this.camera2,this.renderToScreen?null:e,0===c)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),t.autoClear=s,t.setClearColor(n,r)}}),THREE.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],THREE.TAARenderPass=function(t,e,i){void 0===THREE.SSAARenderPass&&console.error("THREE.TAARenderPass relies on THREE.SSAARenderPass"),THREE.SSAARenderPass.call(this,t,e,i),this.sampleLevel=0,this.accumulate=!1},THREE.TAARenderPass.JitterVectors=THREE.SSAARenderPass.JitterVectors,THREE.TAARenderPass.prototype=Object.assign(Object.create(THREE.SSAARenderPass.prototype),{constructor:THREE.TAARenderPass,render:function(t,e,i,A){if(!this.accumulate)return THREE.SSAARenderPass.prototype.render.call(this,t,e,i,A),void(this.accumulateIndex=-1);var s=THREE.TAARenderPass.JitterVectors[5];this.sampleRenderTarget||(this.sampleRenderTarget=new THREE.WebGLRenderTarget(i.width,i.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),this.holdRenderTarget||(this.holdRenderTarget=new THREE.WebGLRenderTarget(i.width,i.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulate&&-1===this.accumulateIndex&&(THREE.SSAARenderPass.prototype.render.call(this,t,this.holdRenderTarget,i,A),this.accumulateIndex=0);var n=t.autoClear;t.autoClear=!1;var r=1/s.length;if(this.accumulateIndex>=0&&this.accumulateIndex<s.length){this.copyUniforms.opacity.value=r,this.copyUniforms.tDiffuse.value=e.texture;for(var o=Math.pow(2,this.sampleLevel),a=0;a<o;a++){var h=s[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(i.width,i.height,.0625*h[0],.0625*h[1],i.width,i.height),t.render(this.scene,this.camera,e,!0),t.render(this.scene2,this.camera2,this.sampleRenderTarget,0===this.accumulateIndex),this.accumulateIndex++,this.accumulateIndex>=s.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}var c=this.accumulateIndex*r;c>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,t.render(this.scene2,this.camera2,e,!0)),c<1&&(this.copyUniforms.opacity.value=1-c,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,t.render(this.scene2,this.camera2,e,0===c)),t.autoClear=n}})},function(t,e,i){"use strict";i.d(e,"a",function(){return A});i(3),i(0),i(2);function A(t,e,i){var A=this;this.parent=t,this.content2d=e,this.drag=!0,this.zdvigX=0,this.sPixi=void 0,this.div=i,this.devas=t.devas,this.pause=!1,this.minMaxX=new THREE.Vector2(0,2.5),this.zume=new THREE.Vector3(1,30,10),this.point=new THREE.Vector2(0,0),this.point1=new THREE.Vector2(0,0),this.b=0,this.minZum=0,this.maxZum=5e3,this.powerZum=5,this.distMinMaxBox=500,this.isDragPan=t._isDragPan,this.isRotateScene=!1;var s=0;this.isIE=!1,(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&(this.isIE=!0),this.getStage=function(t){return null==t.parent?t:this.getStage(t.parent)},this.stageMoveNew=function(t){0!=A.boolDrag&&1!=A.pause&&0!=A.drag&&(t&&A.isDragPan&&a?u(t):null==t.touches?A.isRotateScene&&t.data.originalEvent.shiftKey?(A.parent.scene.rotation.y=s+.01*(t.clientX-A.point1.x),A.parent.intRend=1):(A.parent.rotationX=A.point.y-.01*(t.clientY-A.point1.y),A.minMaxX.x>A.parent.rotationX&&(A.parent.rotationX=A.minMaxX.x),A.minMaxX.y<A.parent.rotationX&&(A.parent.rotationX=A.minMaxX.y),A.parent.rotationZ=A.point.x+.01*(t.clientX-A.point1.x)):1==t.touches.length?(A.parent.rotationX=A.point.y-.01*(t.touches[0].clientY-A.point1.y),A.minMaxX.x>A.parent.rotationX&&(A.parent.rotationX=A.minMaxX.x),A.minMaxX.y<A.parent.rotationX&&(A.parent.rotationX=A.minMaxX.y),A.parent.rotationZ=A.point.x+.01*(t.touches[0].clientX-A.point1.x)):t.touches.length>=2&&(A.pT.x=t.touches[0].clientX,A.pT.y=t.touches[0].clientY,A.pT1.x=t.touches[1].clientX,A.pT1.y=t.touches[1].clientY,0==A.distTach?(A.distTach=calc.getDistance(A.pT,A.pT1),n=0,c.set(Math.round(1*A.pT.x),Math.round(1*A.pT.y))):(r=calc.getDistance(A.pT,A.pT1),n=r-A.distTach,A.distTach=r),o=A.parent._zume-10*n,A.zumNEW(o),u(null,Math.round(1*A.pT.x),Math.round(1*A.pT.y))))},this.pT=new THREE.Vector2(0,0),this.pT1=new THREE.Vector2(0,0);var n=0,r=0;this.boolDrag=!1,this.stageUpNew=function(t){A.boolDrag=!1,0==A.devas?window.removeEventListener("mouseup",A.stageUpNew):(A.distTach=0,window.removeEventListener("touchend",A.stageUpNew))},this.mouseUpp=function(t){A.parent.intRend=1};var o,a=!1;this.distTach=0,this.mouseDown=function(t){var e;1!=A.pause&&(0!=A.drag&&(a=!1,A.boolDrag=!0,A.distTach=0,A.point.y=A.parent.rotationX,A.point.x=A.parent.rotationZ,A.isRotateScene&&(s=A.parent.scene.rotation.y),A.isDragPan&&t&&1===t.button&&(a=!0,e=t,c.set(e.clientX,e.clientY)),0==A.devas?(A.point1.x=t.clientX,A.point1.y=t.clientY,window.addEventListener("mouseup",A.stageUpNew)):(A.point1.x=t.touches[0].clientX,A.point1.y=t.touches[0].clientY,window.addEventListener("touchend",A.stageUpNew))))},this.dragscrol=void 0,this.mousewheel=function(t){if(1!=A.pause&&0!=A.drag){var e=-1;t.delta&&t.delta<0&&(e=1),t.deltaY&&t.deltaY<0&&(e=1),null!=t.wheelDelta&&(e=t.wheelDelta>0?-1:1),o=A.parent._zume+e*A.powerZum,A.zumNEW(o),A.dragscrol&&A.dragscrol(t)}},this.zumNEW=function(t){t<A.minZum&&(t=A.minZum),t>A.maxZum&&(t=A.maxZum),A.parent.zume=t,A.parent.intRend=1},0==A.devas?(i.addEventListener("mousedown",this.mouseDown),i.addEventListener("mousewheel",this.mousewheel),i.addEventListener("mousemove",A.stageMoveNew)):(i.addEventListener("touchstart",this.mouseDown,{passive:!1,capture:!0}),i.addEventListener("touchmove",A.stageMoveNew,{passive:!1,capture:!0}));var h=new THREE.Vector3,c=new THREE.Vector2,d=new THREE.Vector2,l=new THREE.Vector2;function u(t,e,i){null!=t?d.set(t.clientX,t.clientY):d.set(e,i),l.subVectors(d,c),A.moveCamXY(l),c.copy(d)}var g,p=(g=new THREE.Vector3,function(t,e){g.setFromMatrixColumn(e,0),g.multiplyScalar(-t),h.add(g)}),f=function(){var t=new THREE.Vector3;return function(e,i){t.setFromMatrixColumn(i,1),t.multiplyScalar(e),h.add(t)}}(),m=function(t,e){var i=A.parent.renderer.domElement;if(A.parent.camera.isPerspectiveCamera){var s=Math.max(A.parent.zume,10);s*=Math.tan(A.parent.camera.fov/2*Math.PI/180),p(2*t*s/i.clientHeight,A.parent.camera.matrixWorld),f(2*e*s/i.clientHeight,A.parent.camera.matrixWorld)}else console.warn("WARNING: camera neither perspective.")};this.moveCamXY=function(t){h.set(0,0,0),A.parent.camera.updateMatrixWorld(),A.parent.scene.updateMatrixWorld(),arguments.length>1&&(t={x:arguments[0],y:arguments[1]}),m(t.x||0,t.y||0),A.parent.xVerh+=h.x,A.parent.yVerh+=-h.y,A.parent.zVerh+=h.z,A.parent.xVerh=Math.max(Math.min(A.parent.xVerh,A.distMinMaxBox),-A.distMinMaxBox),A.parent.zVerh=Math.max(Math.min(A.parent.zVerh,A.distMinMaxBox),-A.distMinMaxBox),A.parent.yVerh=Math.max(Math.min(A.parent.yVerh,A.distMinMaxBox),-A.distMinMaxBox),h.set(0,0,0)}}},function(t,e,i){"use strict";function A(){this.event=void 0,this.arrSobName=["up","down","move","out","over","wheel"],this.arrSob=[[],[],[],[],[],[]],this.pozSob=void 0,this.dispatcherEvent=function(t,e){for(var i=0;i<this.arrSobName.length;i++)if(this.arrSobName[i]==t){e&&(e.type=t);for(var A=0;A<this.arrSob[i].length;A++)this.arrSob[i][A](e)}},this.removeEvent=function(t,e){for(var i=0;i<this.arrSobName.length;i++)if(this.arrSobName[i]==t)for(var A=0;A<this.arrSob[i].length;A++)this.arrSob[i][A]==e&&this.arrSob[i].splice(A,1)},this.addEvent=function(t,e){for(var i=0;i<this.arrSobName.length;i++)this.arrSobName[i]==t&&this.arrSob[i].push(e)}}function s(){this.target=void 0,this.face=void 0,this.point=void 0,this.faceIndex=void 0,this.type=void 0,this.uv=void 0,this.originalEvent=void 0,this.copy=function(){var t=new Event3D;return t.target=this.target,t.face=this.face,t.point=this.point,t.faceIndex=this.faceIndex,t.type=this.type,t.uv=this.uv,t.originalEvent=this.originalEvent,t}}function n(t,e,i,n){this.parent=t;var r,o=this;this.camera=e,this.raycaster=new THREE.Raycaster,this.intersects,this.devas=t.devas,this.point=new THREE.Vector2(0,0),this.pointWH=new THREE.Vector2(0,0),this.arrChild=[],this.uuid="nullMy",this.obj3d,this.eventSob=new A,this.event3D=new s,this.xzNull="xzNull",this.poiskName="xzPoisk",this.tokoName="null",this._activ=!0,this.rect={x:0,y:0,width:100,height:100},this.cont=void 0,this.div=void 0,this.setRect=function(t,e,i,A){this.rect.x=t,this.rect.y=e,this.rect.width=i,this.rect.height=A},this.removeChild=function(t){for(var e=0;e<this.arrChild.length;e++)t.uuid==this.arrChild[e].uuid&&(this.arrChild.splice(e,1),(e-=1)<0&&(e=0))},this.addChild=function(t){this.arrChild.push(t)},this.boolNum=-1,this.boolNumOld=-1,this.event,this.mouseRay=function(){0!=this._activ&&(this.rayPusk(),this.boolNum=this.getGoodParam(),-1==this.boolNum?"nullMy"!=this.uuid&&(this.eventSob.dispatcherEvent("out",this.event3D),this.uuid="nullMy"):"nullMy"!=this.uuid?this.uuid!=this.intersects[this.boolNum].object.uuid?(this.eventSob.dispatcherEvent("out",this.event3D),this.uuid=this.intersects[this.boolNum].object.uuid,this.event3D.target=this.intersects[this.boolNum].object,this.event3D.face=this.intersects[this.boolNum].face,this.event3D.point=this.intersects[this.boolNum].point,this.event3D.faceIndex=this.intersects[this.boolNum].faceIndex,this.event3D.uv=this.intersects[this.boolNum].uv,this.event3D.originalEvent=o.event,this.eventSob.dispatcherEvent("over",this.event3D)):(this.event3D.face=this.intersects[this.boolNum].face,this.event3D.point=this.intersects[this.boolNum].point,this.event3D.faceIndex=this.intersects[this.boolNum].faceIndex,this.event3D.uv=this.intersects[this.boolNum].uv,this.event3D.originalEvent=o.event,this.eventSob.dispatcherEvent("move",this.event3D)):(this.uuid=this.intersects[this.boolNum].object.uuid,this.event3D.target=this.intersects[this.boolNum].object,this.event3D.face=this.intersects[this.boolNum].face,this.event3D.point=this.intersects[this.boolNum].point,this.event3D.faceIndex=this.intersects[this.boolNum].faceIndex,this.event3D.uv=this.intersects[this.boolNum].uv,this.event3D.originalEvent=o.event,this.eventSob.dispatcherEvent("over",this.event3D)),this.boolNumOld=this.boolNum)},this.getPosition=function(t){var e=this.poiskName;if(this.poiskName=null!=t?t:"xzPoisk",this.restartPoint(),this.rayPusk(),this.poiskName=e,0!=this.intersects.length){var i=this.intersects.length-1;return-1==i&&(i=0),this.intersects[i]}return null};var a=new s;this.getNameEvent=function(t){if(this.restartPoint(),this.rayPusk(),0!=this.intersects.length)for(var e=0;e<this.intersects.length;e++)if(null!=this.intersects[e].object.parent&&this.intersects[e].object.name==t)return a.target=this.intersects[this.boolNum].object,a.face=this.intersects[this.boolNum].face,a.point=this.intersects[this.boolNum].point,a.faceIndex=this.intersects[this.boolNum].faceIndex,a.uv=this.intersects[this.boolNum].uv,a.originalEvent=o.event,a;return null},this.testVisiParam=function(t){return 0!=t.visible&&(!t.notEvent&&(null!=t.parent?this.testVisiParam(t.parent):"Scene"==t.type))},this.getGoodParam=function(){if(0!=this.intersects.length){var t;for(t=0;t<this.intersects.length;t++)0!=this.testVisiParam(this.intersects[t].object)&&null!=this.intersects[t].object.notActiv&&(this.intersects.splice(t,1),t=0);if(0==this.intersects.length)return-1;for(t=0;t<this.intersects.length;t++)if(0!=this.testVisiParam(this.intersects[t].object)&&this.intersects[t].object.name==this.poiskName)return t;for(t=0;t<this.intersects.length;t++)if(0!=this.testVisiParam(this.intersects[t].object)&&this.intersects[t].object.name!=this.xzNull)return t}return-1},this.rayPusk=function(){(r=new THREE.Vector3).setFromMatrixPosition(this.camera.matrixWorld),this.raycaster.ray.origin.copy(r),this.raycaster.ray.direction.set(this.point.x,this.point.y,.5).unproject(this.camera).sub(r).normalize(),this.intersects=this.raycaster.intersectObjects(this.arrChild,!0)},this.naCont=!1,this.mousemove=function(t){0==o.devas&&0==o.naCont||(null!=t.data?o.event=t.data.originalEvent:o.event=t,0!=o._activ&&(o.restartPoint(t),o.mouseRay(),o.intersects.length&&0==o.devas&&o.event.preventDefault()))},this.zdvigX=0,this.scale=1,this.pV=new THREE.Vector2(0,0),this.restartPoint=function(t){0==o.devas?(o.pV.x=t.clientX,o.pV.y=t.clientY):(o.pV.x=t.touches[0].clientX,o.pV.y=t.touches[0].clientY),1==o.isRect(o.pV)?(o.point.x=-(this.rect.x-o.pV.x)/this.rect.width*2-1,o.point.y=-(-(this.rect.y-o.pV.y)/this.rect.height*2-1)):99999!=o.point.x&&(o.point.x=99999)},this.isRect=function(t){return t.x>=this.rect.x&&t.x<=this.rect.x+this.rect.width&&t.y>=this.rect.y&&t.y<=this.rect.y+this.rect.height},this.mouseup=function(t){null!=t.data?o.event=t.data.originalEvent:o.event=t,o.intersects&&0!=o._activ&&(0==o.devas?(-1==o.boolNumOld?o.eventSob.dispatcherEvent("up",null):(o.event3D.originalEvent=o.event,o.eventSob.dispatcherEvent("up",o.event3D)),o.intersects.length&&o.event.preventDefault()):(o.mouseRay(),-1==o.boolNumOld?o.eventSob.dispatcherEvent("up",null):(o.event3D.originalEvent=o.event,o.eventSob.dispatcherEvent("up",o.event3D),o.uuid="nullMy")))},this.mousedown=function(t){null!=t.data?o.event=t.data.originalEvent:o.event=t,o.restartPoint(t),0!=o._activ&&(0==o.devas?(-1==o.boolNumOld?o.eventSob.dispatcherEvent("down",null):(o.event3D.originalEvent=o.event,o.eventSob.dispatcherEvent("down",o.event3D)),o.intersects.length&&o.event.preventDefault()):(o.mouseRay(),-1==o.boolNumOld?o.eventSob.dispatcherEvent("down",null):(o.event3D.originalEvent=o.event,o.eventSob.dispatcherEvent("down",o.event3D))))},this.mouseout=function(t){o.naCont=!1,o.restartPoint(t),o.point.x=99999,o.mouseRay()},this.mouseover=function(t){o.naCont=!0,o.restartPoint(t),o.mouseRay()},this.touchend=function(t){},this.mousewheel=function(t){null!=t.data?o.event=t.data.originalEvent:o.event=t,o.restartPoint(t),0!=o._activ&&(-1==o.boolNumOld?o.eventSob.dispatcherEvent("down",null):(o.event3D.originalEvent=o.event,o.eventSob.dispatcherEvent("wheel",t)))},this.addDragEvent=function(t,e){this.cont=t,this.div=e,0==o.devas?(e.addEventListener("mousemove",o.mousemove),window.addEventListener("mouseup",o.mouseup),e.addEventListener("mousedown",o.mousedown),e.addEventListener("mouseout",o.mouseout),e.addEventListener("mouseover",o.mouseover)):(window.addEventListener("touchmove",o.mousemove),window.addEventListener("touchend",o.mouseup),e.addEventListener("touchstart",o.mousedown))},this.sizeWindow=function(t,e){this.pointWH.x=t,this.pointWH.y=e}}i.d(e,"a",function(){return n}),n.prototype={set activ(t){this._activ!=t&&(this._activ=t)},get activ(){return this._activ}}},function(t,e,i){"use strict";i.r(e),function(t){var A=i(1);i.d(e,"Main",function(){return A.a}),t.Main=A.a}.call(this,i(9))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i}]);